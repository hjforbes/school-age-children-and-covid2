version: '1.0'
actions:

  generate_cohort:
    run: cohortextractor:latest generate_cohort --study-definition study_definition
    outputs:
      highly_sensitive:
        cohort: output/input.csv

  01_cr_analysis_dataset:
    needs: [generate_cohort]
    run: stata-mp:latest analysis/01_cr_analysis_dataset.do
    outputs:
      moderately_sensitive:
        log: log/01_cr_analysis_dataset.log
      highly_sensitive:
        data: "tempdata/cr_create_analysis_dataset_STSET_*_ageband_*.dta"
        ageband_data: "tempdata/analysis_dataset_ageband_*.dta"

  02_an_data_checks:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/02_an_data_checks.do
    outputs:
      moderately_sensitive:
        log: log/02_an_data_checks.log

  03a_an_descriptive_tables:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/03a_an_descriptive_tables.do
    outputs:
      moderately_sensitive:
        log: log/03a_an_descriptive_tables.log

  03b_an_descriptive_table_1:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/03b_an_descriptive_table_1.do
    outputs:
      moderately_sensitive:
        log: log/03b_an_descriptive_table_1.log
        data: "output/03b_an_descriptive_table_1_kids_cat3_ageband*.txt"

  04a_an_descriptive_tables:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/04a_an_descriptive_tables.do
    outputs:
      moderately_sensitive:
        log: log/04a_an_descriptive_tables.log

  04b_an_descriptive_table_2_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/04b_an_descriptive_table_2.do non_covid_death
    outputs:
      moderately_sensitive:
        log: 04b_an_descriptive_table_2.log
        data: "output/04b_an_descriptive_table_2_non_covid_death_ageband*.txt"

  04b_an_descriptive_table_2_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/04b_an_descriptive_table_2.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: 04b_an_descriptive_table_2.log
        data: "output/04b_an_descriptive_table_2_covid_tpp_prob_ageband*.txt"

  04b_an_descriptive_table_2_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/04b_an_descriptive_table_2.do covid_death
    outputs:
      moderately_sensitive:
        log: 04b_an_descriptive_table_2.log
        data: "output/04b_an_descriptive_table_2_covid_death_ageband*.txt"

  04b_an_descriptive_table_2_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/04b_an_descriptive_table_2.do covid_icu
    outputs:
      moderately_sensitive:
        log: 04b_an_descriptive_table_2.log
        data: "output/04b_an_descriptive_table_2_covid_icu_ageband*.txt"

  04b_an_descriptive_table_2_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/04b_an_descriptive_table_2.do covidadmission
    outputs:
      moderately_sensitive:
        log: 04b_an_descriptive_table_2.log
        data: "output/04b_an_descriptive_table_2_covidadmission_ageband*.txt"

  06_univariate_analysis_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06_univariate_analysis.do any kids_cat3 gp_number_kids
    outputs:
      moderately_sensitive:
        log: log/06_univariate_analysis_any.log
        data: "output/an_univariable_cox_models_any_AGESEX_*_ageband_*.ster"

  06a_univariate_analysis_SENSE_12mo_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06a_univariate_analysis_SENSE_12mo.do any kids_cat3
    outputs:
      moderately_sensitive:
        log: log/06a_univariate_analysis_SENSE_12moany.log
        data: "output/an_univariable_cox_models_any_AGESEX_*_12mo_ageband_*.ster"

  07a_an_multivariable_cox_models_demogADJ_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07a_an_multivariable_cox_models_demogADJ.do any
    outputs:
      moderately_sensitive:
        log: log/07a_an_multivariable_cox_models_any.log
        data: "output/an_multivariate_cox_models_any_*_DEMOGADJ_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL.do any
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_any.log
        data: "output/an_multivariate_cox_models_any_*_MAINFULLYADJMODEL_*_ageband_*.ster"
        other_data: "output/an_sense_any_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense1_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense1.do any
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense1_any.log
        data: "output/an_sense_any_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense2_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense2.do any
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense2_any.log
        data: "output/an_sense_any_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense3_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense3.do any
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense3_any.log
        data: "output/an_sense_any_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense4_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense4.do any
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_any_Sense4_*.log
        data: "output/an_sense_any_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense5_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense5.do any
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_any_Sense5_*.log
        data: "output/an_sense_any_*_ageband_*.ster"

  16_exploratory_analysis_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/16_exploratory_analysis.do any
    outputs:
      moderately_sensitive:
        log: log/16_exploratory_analysis_any.log

  10_an_interaction_cox_models_sex_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_sex.do any
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_sex_any.log
        data: "output/an_interaction_cox_models_any_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_shield_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_shield.do any
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_shield_any.log
        data: "output/an_interaction_cox_models_any_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_time_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_time.do any
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_time_any.log
        data: "output/an_interaction_cox_models_any_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_weeks_any:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_weeks.do any
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_weeks_any.log
        data: "output/an_interaction_cox_models_any_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  06_univariate_analysis_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06_univariate_analysis.do non_covid_death kids_cat3 gp_number_kids
    outputs:
      moderately_sensitive:
        log: log/06_univariate_analysis_non_covid_death.log
        data: "output/an_univariable_cox_models_non_covid_death_AGESEX_*_ageband_*.ster"

  06a_univariate_analysis_SENSE_12mo_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06a_univariate_analysis_SENSE_12mo.do non_covid_death kids_cat3
    outputs:
      moderately_sensitive:
        log: log/06a_univariate_analysis_SENSE_12monon_covid_death.log
        data: "output/an_univariable_cox_models_non_covid_death_AGESEX_*_12mo_ageband_*.ster"

  07a_an_multivariable_cox_models_demogADJ_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07a_an_multivariable_cox_models_demogADJ.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/07a_an_multivariable_cox_models_non_covid_death.log
        data: "output/an_multivariate_cox_models_non_covid_death_*_DEMOGADJ_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_non_covid_death.log
        data: "output/an_multivariate_cox_models_non_covid_death_*_MAINFULLYADJMODEL_*_ageband_*.ster"
        other_data: "output/an_sense_non_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense1_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense1.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense1_non_covid_death.log
        data: "output/an_sense_non_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense2_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense2.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense2_non_covid_death.log
        data: "output/an_sense_non_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense3_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense3.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense3_non_covid_death.log
        data: "output/an_sense_non_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense4_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense4.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_non_covid_death_Sense4_*.log
        data: "output/an_sense_non_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense5_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense5.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_non_covid_death_Sense5_*.log
        data: "output/an_sense_non_covid_death_*_ageband_*.ster"

  16_exploratory_analysis_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/16_exploratory_analysis.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/16_exploratory_analysis_non_covid_death.log

  10_an_interaction_cox_models_sex_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_sex.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_sex_non_covid_death.log
        data: "output/an_interaction_cox_models_non_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_shield_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_shield.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_shield_non_covid_death.log
        data: "output/an_interaction_cox_models_non_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_time_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_time.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_time_non_covid_death.log
        data: "output/an_interaction_cox_models_non_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_weeks_non_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_weeks.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_weeks_non_covid_death.log
        data: "output/an_interaction_cox_models_non_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  06_univariate_analysis_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06_univariate_analysis.do covid_tpp_prob kids_cat3 gp_number_kids
    outputs:
      moderately_sensitive:
        log: log/06_univariate_analysis_covid_tpp_prob.log
        data: "output/an_univariable_cox_models_covid_tpp_prob_AGESEX_*_ageband_*.ster"

  06a_univariate_analysis_SENSE_12mo_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06a_univariate_analysis_SENSE_12mo.do covid_tpp_prob kids_cat3
    outputs:
      moderately_sensitive:
        log: log/06a_univariate_analysis_SENSE_12mocovid_tpp_prob.log
        data: "output/an_univariable_cox_models_covid_tpp_prob_AGESEX_*_12mo_ageband_*.ster"

  07a_an_multivariable_cox_models_demogADJ_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07a_an_multivariable_cox_models_demogADJ.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/07a_an_multivariable_cox_models_covid_tpp_prob.log
        data: "output/an_multivariate_cox_models_covid_tpp_prob_*_DEMOGADJ_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_tpp_prob.log
        data: "output/an_multivariate_cox_models_covid_tpp_prob_*_MAINFULLYADJMODEL_*_ageband_*.ster"
        other_data: "output/an_sense_covid_tpp_prob_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense1_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense1.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense1_covid_tpp_prob.log
        data: "output/an_sense_covid_tpp_prob_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense2_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense2.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense2_covid_tpp_prob.log
        data: "output/an_sense_covid_tpp_prob_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense3_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense3.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense3_covid_tpp_prob.log
        data: "output/an_sense_covid_tpp_prob_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense4_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense4.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_tpp_prob_Sense4_*.log
        data: "output/an_sense_covid_tpp_prob_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense5_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense5.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_tpp_prob_Sense5_*.log
        data: "output/an_sense_covid_tpp_prob_*_ageband_*.ster"

  16_exploratory_analysis_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/16_exploratory_analysis.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/16_exploratory_analysis_covid_tpp_prob.log

  10_an_interaction_cox_models_sex_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_sex.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_sex_covid_tpp_prob.log
        data: "output/an_interaction_cox_models_covid_tpp_prob_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_shield_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_shield.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_shield_covid_tpp_prob.log
        data: "output/an_interaction_cox_models_covid_tpp_prob_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_time_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_time.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_time_covid_tpp_prob.log
        data: "output/an_interaction_cox_models_covid_tpp_prob_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_weeks_covid_tpp_prob:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_weeks.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_weeks_covid_tpp_prob.log
        data: "output/an_interaction_cox_models_covid_tpp_prob_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  06_univariate_analysis_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06_univariate_analysis.do covid_death kids_cat3 gp_number_kids
    outputs:
      moderately_sensitive:
        log: log/06_univariate_analysis_covid_death.log
        data: "output/an_univariable_cox_models_covid_death_AGESEX_*_ageband_*.ster"

  06a_univariate_analysis_SENSE_12mo_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06a_univariate_analysis_SENSE_12mo.do covid_death kids_cat3
    outputs:
      moderately_sensitive:
        log: log/06a_univariate_analysis_SENSE_12mocovid_death.log
        data: "output/an_univariable_cox_models_covid_death_AGESEX_*_12mo_ageband_*.ster"

  07a_an_multivariable_cox_models_demogADJ_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07a_an_multivariable_cox_models_demogADJ.do covid_death
    outputs:
      moderately_sensitive:
        log: log/07a_an_multivariable_cox_models_covid_death.log
        data: "output/an_multivariate_cox_models_covid_death_*_DEMOGADJ_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL.do covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_death.log
        data: "output/an_multivariate_cox_models_covid_death_*_MAINFULLYADJMODEL_*_ageband_*.ster"
        other_data: "output/an_sense_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense1_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense1.do covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense1_covid_death.log
        data: "output/an_sense_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense2_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense2.do covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense2_covid_death.log
        data: "output/an_sense_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense3_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense3.do covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense3_covid_death.log
        data: "output/an_sense_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense4_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense4.do covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_death_Sense4_*.log
        data: "output/an_sense_covid_death_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense5_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense5.do covid_death
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_death_Sense5_*.log
        data: "output/an_sense_covid_death_*_ageband_*.ster"

  16_exploratory_analysis_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/16_exploratory_analysis.do covid_death
    outputs:
      moderately_sensitive:
        log: log/16_exploratory_analysis_covid_death.log

  10_an_interaction_cox_models_sex_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_sex.do covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_sex_covid_death.log
        data: "output/an_interaction_cox_models_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_shield_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_shield.do covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_shield_covid_death.log
        data: "output/an_interaction_cox_models_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_time_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_time.do covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_time_covid_death.log
        data: "output/an_interaction_cox_models_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_weeks_covid_death:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_weeks.do covid_death
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_weeks_covid_death.log
        data: "output/an_interaction_cox_models_covid_death_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  06_univariate_analysis_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06_univariate_analysis.do covid_icu kids_cat3 gp_number_kids
    outputs:
      moderately_sensitive:
        log: log/06_univariate_analysis_covid_icu.log
        data: "output/an_univariable_cox_models_covid_icu_AGESEX_*_ageband_*.ster"

  06a_univariate_analysis_SENSE_12mo_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06a_univariate_analysis_SENSE_12mo.do covid_icu kids_cat3
    outputs:
      moderately_sensitive:
        log: log/06a_univariate_analysis_SENSE_12mocovid_icu.log
        data: "output/an_univariable_cox_models_covid_icu_AGESEX_*_12mo_ageband_*.ster"

  07a_an_multivariable_cox_models_demogADJ_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07a_an_multivariable_cox_models_demogADJ.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/07a_an_multivariable_cox_models_covid_icu.log
        data: "output/an_multivariate_cox_models_covid_icu_*_DEMOGADJ_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_icu.log
        data: "output/an_multivariate_cox_models_covid_icu_*_MAINFULLYADJMODEL_*_ageband_*.ster"
        other_data: "output/an_sense_covid_icu_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense1_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense1.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense1_covid_icu.log
        data: "output/an_sense_covid_icu_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense2_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense2.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense2_covid_icu.log
        data: "output/an_sense_covid_icu_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense3_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense3.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense3_covid_icu.log
        data: "output/an_sense_covid_icu_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense4_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense4.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_icu_Sense4_*.log
        data: "output/an_sense_covid_icu_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense5_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense5.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covid_icu_Sense5_*.log
        data: "output/an_sense_covid_icu_*_ageband_*.ster"

  16_exploratory_analysis_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/16_exploratory_analysis.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/16_exploratory_analysis_covid_icu.log

  10_an_interaction_cox_models_sex_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_sex.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_sex_covid_icu.log
        data: "output/an_interaction_cox_models_covid_icu_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_shield_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_shield.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_shield_covid_icu.log
        data: "output/an_interaction_cox_models_covid_icu_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_time_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_time.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_time_covid_icu.log
        data: "output/an_interaction_cox_models_covid_icu_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_weeks_covid_icu:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_weeks.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_weeks_covid_icu.log
        data: "output/an_interaction_cox_models_covid_icu_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  06_univariate_analysis_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06_univariate_analysis.do covidadmission kids_cat3 gp_number_kids
    outputs:
      moderately_sensitive:
        log: log/06_univariate_analysis_covidadmission.log
        data: "output/an_univariable_cox_models_covidadmission_AGESEX_*_ageband_*.ster"

  06a_univariate_analysis_SENSE_12mo_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/06a_univariate_analysis_SENSE_12mo.do covidadmission kids_cat3
    outputs:
      moderately_sensitive:
        log: log/06a_univariate_analysis_SENSE_12mocovidadmission.log
        data: "output/an_univariable_cox_models_covidadmission_AGESEX_*_12mo_ageband_*.ster"

  07a_an_multivariable_cox_models_demogADJ_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07a_an_multivariable_cox_models_demogADJ.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/07a_an_multivariable_cox_models_covidadmission.log
        data: "output/an_multivariate_cox_models_covidadmission_*_DEMOGADJ_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covidadmission.log
        data: "output/an_multivariate_cox_models_covidadmission_*_MAINFULLYADJMODEL_*_ageband_*.ster"
        other_data: "output/an_sense_covidadmission_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense1_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense1.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense1_covidadmission.log
        data: "output/an_sense_covidadmission_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense2_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense2.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense2_covidadmission.log
        data: "output/an_sense_covidadmission_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense3_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense3.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_FULL_Sense3_covidadmission.log
        data: "output/an_sense_covidadmission_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense4_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense4.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covidadmission_Sense4_*.log
        data: "output/an_sense_covidadmission_*_ageband_*.ster"

  07b_an_multivariable_cox_models_FULL_Sense5_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/07b_an_multivariable_cox_models_FULL_Sense5.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/07b_an_multivariable_cox_models_covidadmission_Sense5_*.log
        data: "output/an_sense_covidadmission_*_ageband_*.ster"

  16_exploratory_analysis_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/16_exploratory_analysis.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/16_exploratory_analysis_covidadmission.log

  10_an_interaction_cox_models_sex_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_sex.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_sex_covidadmission.log
        data: "output/an_interaction_cox_models_covidadmission_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_shield_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_shield.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_shield_covidadmission.log
        data: "output/an_interaction_cox_models_covidadmission_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_time_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_time.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_time_covidadmission.log
        data: "output/an_interaction_cox_models_covidadmission_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  10_an_interaction_cox_models_weeks_covidadmission:
    needs: [01_cr_analysis_dataset]
    run: stata-mp:latest analysis/10_an_interaction_cox_models_weeks.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/10_an_interaction_cox_models_weeks_covidadmission.log
        data: "output/an_interaction_cox_models_covidadmission_*_MAINFULLYADJMODEL_agespline_bmicat_noeth_ageband_*.ster"

  08_an_tablecontent_HRtable_any:
    needs: 
      - 01_cr_analysis_dataset
      - 06_univariate_analysis_any
      - 07a_an_multivariable_cox_models_demogADJ_any
      - 07b_an_multivariable_cox_models_FULL_any
    run: stata-mp:latest analysis/08_an_tablecontent_HRtable.do any
    outputs:
      moderately_sensitive:
        log: log/08_an_tablecontent_HRtable_any.log
        data: "output/an_tablecontents_HRtable_any.txt"

  08_an_tablecontent_HRtable_non_covid_death:
    needs: 
      - 01_cr_analysis_dataset
      - 06_univariate_analysis_non_covid_death
      - 07a_an_multivariable_cox_models_demogADJ_non_covid_death
      - 07b_an_multivariable_cox_models_FULL_non_covid_death
    run: stata-mp:latest analysis/08_an_tablecontent_HRtable.do non_covid_death
    outputs:
      moderately_sensitive:
        log: log/08_an_tablecontent_HRtable_non_covid_death.log
        data: "output/an_tablecontents_HRtable_non_covid_death.txt"

  08_an_tablecontent_HRtable_covid_tpp_prob:
    needs: 
      - 01_cr_analysis_dataset
      - 06_univariate_analysis_covid_tpp_prob
      - 07a_an_multivariable_cox_models_demogADJ_covid_tpp_prob
      - 07b_an_multivariable_cox_models_FULL_covid_tpp_prob
    run: stata-mp:latest analysis/08_an_tablecontent_HRtable.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: log/08_an_tablecontent_HRtable_covid_tpp_prob.log
        data: "output/an_tablecontents_HRtable_covid_tpp_prob.txt"

  08_an_tablecontent_HRtable_covid_death:
    needs: 
      - 01_cr_analysis_dataset
      - 06_univariate_analysis_covid_death
      - 07a_an_multivariable_cox_models_demogADJ_covid_death
      - 07b_an_multivariable_cox_models_FULL_covid_death
    run: stata-mp:latest analysis/08_an_tablecontent_HRtable.do covid_death
    outputs:
      moderately_sensitive:
        log: log/08_an_tablecontent_HRtable_covid_death.log
        data: "output/an_tablecontents_HRtable_covid_death.txt"

  08_an_tablecontent_HRtable_covid_icu:
    needs: 
      - 01_cr_analysis_dataset
      - 06_univariate_analysis_covid_icu
      - 07a_an_multivariable_cox_models_demogADJ_covid_icu
      - 07b_an_multivariable_cox_models_FULL_covid_icu
    run: stata-mp:latest analysis/08_an_tablecontent_HRtable.do covid_icu
    outputs:
      moderately_sensitive:
        log: log/08_an_tablecontent_HRtable_covid_icu.log
        data: "output/an_tablecontents_HRtable_covid_icu.txt"

  08_an_tablecontent_HRtable_covidadmission:
    needs: 
      - 01_cr_analysis_dataset
      - 06_univariate_analysis_covidadmission
      - 07a_an_multivariable_cox_models_demogADJ_covidadmission
      - 07b_an_multivariable_cox_models_FULL_covidadmission
    run: stata-mp:latest analysis/08_an_tablecontent_HRtable.do covidadmission
    outputs:
      moderately_sensitive:
        log: log/08_an_tablecontent_HRtable_covidadmission.log
        data: "output/an_tablecontents_HRtable_covidadmission.txt"

  15_anHRfigure_all_outcomes_covidadmission:
    needs: 
      - 07b_an_multivariable_cox_models_FULL_non_covid_death
      - 07b_an_multivariable_cox_models_FULL_covid_tpp_prob
      - 07b_an_multivariable_cox_models_FULL_covid_death
      - 07b_an_multivariable_cox_models_FULL_covid_icu
      - 07b_an_multivariable_cox_models_FULL_covidadmission
    run: stata-mp:latest analysis/15_anHRfigure_all_outcomes.do covidadmission
    outputs:
      moderately_sensitive:
        log: 15_anHRfigure_all_outcomes.log
        data: "output/15_an_tablecontents_HRtable_all_outcomes_ANALYSES.txt"
        figure: "output/15_an_HRforest_all_outcomes_ageband_*.svg"

  11_an_interaction_HR_tables_forest_any:
    needs: 
      - 10_an_interaction_cox_models_sex_any
      - 10_an_interaction_cox_models_shield_any
      - 10_an_interaction_cox_models_time_any
      - 10_an_interaction_cox_models_weeks_any
    run: stata-mp:latest analysis/11_an_interaction_HR_tables_forest.do any
    outputs:
      moderately_sensitive:
        log: 11_an_interaction_HR_tables_forest.log
        data: "output/11_an_int_tab_contents_HRtable_any.txt"

  11_an_interaction_HR_tables_forest_non_covid_death:
    needs: 
      - 10_an_interaction_cox_models_sex_non_covid_death
      - 10_an_interaction_cox_models_shield_non_covid_death
      - 10_an_interaction_cox_models_time_non_covid_death
      - 10_an_interaction_cox_models_weeks_non_covid_death
    run: stata-mp:latest analysis/11_an_interaction_HR_tables_forest.do non_covid_death
    outputs:
      moderately_sensitive:
        log: 11_an_interaction_HR_tables_forest.log
        data: "output/11_an_int_tab_contents_HRtable_non_covid_death.txt"

  11_an_interaction_HR_tables_forest_covid_tpp_prob:
    needs: 
      - 10_an_interaction_cox_models_sex_covid_tpp_prob
      - 10_an_interaction_cox_models_shield_covid_tpp_prob
      - 10_an_interaction_cox_models_time_covid_tpp_prob
      - 10_an_interaction_cox_models_weeks_covid_tpp_prob
    run: stata-mp:latest analysis/11_an_interaction_HR_tables_forest.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: 11_an_interaction_HR_tables_forest.log
        data: "output/11_an_int_tab_contents_HRtable_covid_tpp_prob.txt"

  11_an_interaction_HR_tables_forest_covid_death:
    needs: 
      - 10_an_interaction_cox_models_sex_covid_death
      - 10_an_interaction_cox_models_shield_covid_death
      - 10_an_interaction_cox_models_time_covid_death
      - 10_an_interaction_cox_models_weeks_covid_death
    run: stata-mp:latest analysis/11_an_interaction_HR_tables_forest.do covid_death
    outputs:
      moderately_sensitive:
        log: 11_an_interaction_HR_tables_forest.log
        data: "output/11_an_int_tab_contents_HRtable_covid_death.txt"

  11_an_interaction_HR_tables_forest_covid_icu:
    needs: 
      - 10_an_interaction_cox_models_sex_covid_icu
      - 10_an_interaction_cox_models_shield_covid_icu
      - 10_an_interaction_cox_models_time_covid_icu
      - 10_an_interaction_cox_models_weeks_covid_icu
    run: stata-mp:latest analysis/11_an_interaction_HR_tables_forest.do covid_icu
    outputs:
      moderately_sensitive:
        log: 11_an_interaction_HR_tables_forest.log
        data: "output/11_an_int_tab_contents_HRtable_covid_icu.txt"

  11_an_interaction_HR_tables_forest_covidadmission:
    needs: 
      - 10_an_interaction_cox_models_sex_covidadmission
      - 10_an_interaction_cox_models_shield_covidadmission
      - 10_an_interaction_cox_models_time_covidadmission
      - 10_an_interaction_cox_models_weeks_covidadmission
    run: stata-mp:latest analysis/11_an_interaction_HR_tables_forest.do covidadmission
    outputs:
      moderately_sensitive:
        log: 11_an_interaction_HR_tables_forest.log
        data: "output/11_an_int_tab_contents_HRtable_covidadmission.txt"

  11a_an_interaction_HR_tables_forest_WEEKS_covidadmission:
    needs: 
      - 10_an_interaction_cox_models_sex_non_covid_death
      - 10_an_interaction_cox_models_sex_covid_tpp_prob
      - 10_an_interaction_cox_models_sex_covid_death
      - 10_an_interaction_cox_models_sex_covid_icu
      - 10_an_interaction_cox_models_sex_covidadmission
      - 10_an_interaction_cox_models_shield_non_covid_death
      - 10_an_interaction_cox_models_shield_covid_tpp_prob
      - 10_an_interaction_cox_models_shield_covid_death
      - 10_an_interaction_cox_models_shield_covid_icu
      - 10_an_interaction_cox_models_shield_covidadmission
      - 10_an_interaction_cox_models_time_non_covid_death
      - 10_an_interaction_cox_models_time_covid_tpp_prob
      - 10_an_interaction_cox_models_time_covid_death
      - 10_an_interaction_cox_models_time_covid_icu
      - 10_an_interaction_cox_models_time_covidadmission
      - 10_an_interaction_cox_models_weeks_non_covid_death
      - 10_an_interaction_cox_models_weeks_covid_tpp_prob
      - 10_an_interaction_cox_models_weeks_covid_death
      - 10_an_interaction_cox_models_weeks_covid_icu
      - 10_an_interaction_cox_models_weeks_covidadmission
    run: stata-mp:latest analysis/11a_an_interaction_HR_tables_forest_WEEKS.do covidadmission
    outputs:
      moderately_sensitive:
        log: 11a_an_interaction_HR_tables_forest_WEEKS.log
        data: "output/an_int_tab_contents_HRtable_WEEKS.txt"
        figure: "output/an_tablecontent_HRtable_HRforest_int_*_ageband_*.svg"

  09_an_agesplinevisualisation_any:
    needs: [01_cr_analysis_dataset, 07b_an_multivariable_cox_models_FULL_any]
    run: stata-mp:latest analysis/09_an_agesplinevisualisation.do any
    outputs:
      moderately_sensitive:
        log: 09_an_agesplinevisualisation.log
        figure: "output/an_agesplinevisualisation_any_ageband_*.svg"

  12_an_tablecontent_HRtable_SENSE_any:
    needs: 
      - 07b_an_multivariable_cox_models_FULL_Sense1_any
      - 07b_an_multivariable_cox_models_FULL_Sense2_any
      - 07b_an_multivariable_cox_models_FULL_Sense3_any
      - 07b_an_multivariable_cox_models_FULL_Sense4_any
      - 07b_an_multivariable_cox_models_FULL_Sense5_any
    run: stata-mp:latest analysis/12_an_tablecontent_HRtable_SENSE.do any
    outputs:
      moderately_sensitive:
        log: 12_an_tablecontent_HRtable_SENSE.log
        data: "output/12_an_sense_HRtable_any_SENSE_ANALYSES.txt"
        figure: "output/12_an_HRforest_SENSE_any_ageband_*.svg"

  09_an_agesplinevisualisation_non_covid_death:
    needs: [01_cr_analysis_dataset, 07b_an_multivariable_cox_models_FULL_non_covid_death]
    run: stata-mp:latest analysis/09_an_agesplinevisualisation.do non_covid_death
    outputs:
      moderately_sensitive:
        log: 09_an_agesplinevisualisation.log
        figure: "output/an_agesplinevisualisation_non_covid_death_ageband_*.svg"

  12_an_tablecontent_HRtable_SENSE_non_covid_death:
    needs: 
      - 07b_an_multivariable_cox_models_FULL_Sense1_non_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense2_non_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense3_non_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense4_non_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense5_non_covid_death
    run: stata-mp:latest analysis/12_an_tablecontent_HRtable_SENSE.do non_covid_death
    outputs:
      moderately_sensitive:
        log: 12_an_tablecontent_HRtable_SENSE.log
        data: "output/12_an_sense_HRtable_non_covid_death_SENSE_ANALYSES.txt"
        figure: "output/12_an_HRforest_SENSE_non_covid_death_ageband_*.svg"

  09_an_agesplinevisualisation_covid_tpp_prob:
    needs: [01_cr_analysis_dataset, 07b_an_multivariable_cox_models_FULL_covid_tpp_prob]
    run: stata-mp:latest analysis/09_an_agesplinevisualisation.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: 09_an_agesplinevisualisation.log
        figure: "output/an_agesplinevisualisation_covid_tpp_prob_ageband_*.svg"

  12_an_tablecontent_HRtable_SENSE_covid_tpp_prob:
    needs: 
      - 07b_an_multivariable_cox_models_FULL_Sense1_covid_tpp_prob
      - 07b_an_multivariable_cox_models_FULL_Sense2_covid_tpp_prob
      - 07b_an_multivariable_cox_models_FULL_Sense3_covid_tpp_prob
      - 07b_an_multivariable_cox_models_FULL_Sense4_covid_tpp_prob
      - 07b_an_multivariable_cox_models_FULL_Sense5_covid_tpp_prob
    run: stata-mp:latest analysis/12_an_tablecontent_HRtable_SENSE.do covid_tpp_prob
    outputs:
      moderately_sensitive:
        log: 12_an_tablecontent_HRtable_SENSE.log
        data: "output/12_an_sense_HRtable_covid_tpp_prob_SENSE_ANALYSES.txt"
        figure: "output/12_an_HRforest_SENSE_covid_tpp_prob_ageband_*.svg"

  09_an_agesplinevisualisation_covid_death:
    needs: [01_cr_analysis_dataset, 07b_an_multivariable_cox_models_FULL_covid_death]
    run: stata-mp:latest analysis/09_an_agesplinevisualisation.do covid_death
    outputs:
      moderately_sensitive:
        log: 09_an_agesplinevisualisation.log
        figure: "output/an_agesplinevisualisation_covid_death_ageband_*.svg"

  12_an_tablecontent_HRtable_SENSE_covid_death:
    needs: 
      - 07b_an_multivariable_cox_models_FULL_Sense1_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense2_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense3_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense4_covid_death
      - 07b_an_multivariable_cox_models_FULL_Sense5_covid_death
    run: stata-mp:latest analysis/12_an_tablecontent_HRtable_SENSE.do covid_death
    outputs:
      moderately_sensitive:
        log: 12_an_tablecontent_HRtable_SENSE.log
        data: "output/12_an_sense_HRtable_covid_death_SENSE_ANALYSES.txt"
        figure: "output/12_an_HRforest_SENSE_covid_death_ageband_*.svg"

  09_an_agesplinevisualisation_covid_icu:
    needs: [01_cr_analysis_dataset, 07b_an_multivariable_cox_models_FULL_covid_icu]
    run: stata-mp:latest analysis/09_an_agesplinevisualisation.do covid_icu
    outputs:
      moderately_sensitive:
        log: 09_an_agesplinevisualisation.log
        figure: "output/an_agesplinevisualisation_covid_icu_ageband_*.svg"

  12_an_tablecontent_HRtable_SENSE_covid_icu:
    needs: 
      - 07b_an_multivariable_cox_models_FULL_Sense1_covid_icu
      - 07b_an_multivariable_cox_models_FULL_Sense2_covid_icu
      - 07b_an_multivariable_cox_models_FULL_Sense3_covid_icu
      - 07b_an_multivariable_cox_models_FULL_Sense4_covid_icu
      - 07b_an_multivariable_cox_models_FULL_Sense5_covid_icu
    run: stata-mp:latest analysis/12_an_tablecontent_HRtable_SENSE.do covid_icu
    outputs:
      moderately_sensitive:
        log: 12_an_tablecontent_HRtable_SENSE.log
        data: "output/12_an_sense_HRtable_covid_icu_SENSE_ANALYSES.txt"
        figure: "output/12_an_HRforest_SENSE_covid_icu_ageband_*.svg"

  09_an_agesplinevisualisation_covidadmission:
    needs: [01_cr_analysis_dataset, 07b_an_multivariable_cox_models_FULL_covidadmission]
    run: stata-mp:latest analysis/09_an_agesplinevisualisation.do covidadmission
    outputs:
      moderately_sensitive:
        log: 09_an_agesplinevisualisation.log
        figure: "output/an_agesplinevisualisation_covidadmission_ageband_*.svg"

  12_an_tablecontent_HRtable_SENSE_covidadmission:
    needs: 
      - 07b_an_multivariable_cox_models_FULL_Sense1_covidadmission
      - 07b_an_multivariable_cox_models_FULL_Sense2_covidadmission
      - 07b_an_multivariable_cox_models_FULL_Sense3_covidadmission
      - 07b_an_multivariable_cox_models_FULL_Sense4_covidadmission
      - 07b_an_multivariable_cox_models_FULL_Sense5_covidadmission
    run: stata-mp:latest analysis/12_an_tablecontent_HRtable_SENSE.do covidadmission
    outputs:
      moderately_sensitive:
        log: 12_an_tablecontent_HRtable_SENSE.log
        data: "output/12_an_sense_HRtable_covidadmission_SENSE_ANALYSES.txt"
        figure: "output/12_an_HRforest_SENSE_covidadmission_ageband_*.svg"

  run_all:
    needs:
      - 02_an_data_checks
      - 03a_an_descriptive_tables
      - 03b_an_descriptive_table_1
      - 04a_an_descriptive_tables
      - 04b_an_descriptive_table_2_covid_death
      - 04b_an_descriptive_table_2_covid_icu
      - 04b_an_descriptive_table_2_covid_tpp_prob
      - 04b_an_descriptive_table_2_covidadmission
      - 04b_an_descriptive_table_2_non_covid_death
      - 06a_univariate_analysis_SENSE_12mo_any
      - 06a_univariate_analysis_SENSE_12mo_covid_death
      - 06a_univariate_analysis_SENSE_12mo_covid_icu
      - 06a_univariate_analysis_SENSE_12mo_covid_tpp_prob
      - 06a_univariate_analysis_SENSE_12mo_covidadmission
      - 06a_univariate_analysis_SENSE_12mo_non_covid_death
      - 08_an_tablecontent_HRtable_any
      - 08_an_tablecontent_HRtable_covid_death
      - 08_an_tablecontent_HRtable_covid_icu
      - 08_an_tablecontent_HRtable_covid_tpp_prob
      - 08_an_tablecontent_HRtable_covidadmission
      - 08_an_tablecontent_HRtable_non_covid_death
      - 09_an_agesplinevisualisation_any
      - 09_an_agesplinevisualisation_covid_death
      - 09_an_agesplinevisualisation_covid_icu
      - 09_an_agesplinevisualisation_covid_tpp_prob
      - 09_an_agesplinevisualisation_covidadmission
      - 09_an_agesplinevisualisation_non_covid_death
      - 11_an_interaction_HR_tables_forest_any
      - 11_an_interaction_HR_tables_forest_covid_death
      - 11_an_interaction_HR_tables_forest_covid_icu
      - 11_an_interaction_HR_tables_forest_covid_tpp_prob
      - 11_an_interaction_HR_tables_forest_covidadmission
      - 11_an_interaction_HR_tables_forest_non_covid_death
      - 11a_an_interaction_HR_tables_forest_WEEKS_covidadmission
      - 12_an_tablecontent_HRtable_SENSE_any
      - 12_an_tablecontent_HRtable_SENSE_covid_death
      - 12_an_tablecontent_HRtable_SENSE_covid_icu
      - 12_an_tablecontent_HRtable_SENSE_covid_tpp_prob
      - 12_an_tablecontent_HRtable_SENSE_covidadmission
      - 12_an_tablecontent_HRtable_SENSE_non_covid_death
      - 15_anHRfigure_all_outcomes_covidadmission
      - 16_exploratory_analysis_any
      - 16_exploratory_analysis_covid_death
      - 16_exploratory_analysis_covid_icu
      - 16_exploratory_analysis_covid_tpp_prob
      - 16_exploratory_analysis_covidadmission
      - 16_exploratory_analysis_non_covid_death
    # In order to be valid this action needs to define a run commmand and
    # some output. We don't really care what these are but the below seems to
    # do the trick.
    run: cohortextractor:latest --version
    outputs:
      moderately_sensitive:
        whatever: project.yaml
