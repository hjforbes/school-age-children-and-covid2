2021-07-14T09:52:01.896231100Z 
2021-07-14T09:52:01.896285400Z   ___  ____  ____  ____  ____ (R)
2021-07-14T09:52:01.896290700Z  /__    /   ____/   /   ____/
2021-07-14T09:52:01.896294200Z ___/   /   /___/   /   /___/   16.1   Copyright 1985-2019 StataCorp LLC
2021-07-14T09:52:01.896297400Z   Statistics/Data Analysis            StataCorp
2021-07-14T09:52:01.896300600Z                                       4905 Lakeway Drive
2021-07-14T09:52:01.896303700Z                                       College Station, Texas 77845 USA
2021-07-14T09:52:01.896306900Z                                       800-STATA-PC        http://www.stata.com
2021-07-14T09:52:01.896309900Z                                       979-696-4600        stata@stata.com
2021-07-14T09:52:01.896313200Z                                       979-696-4601 (fax)
2021-07-14T09:52:01.896315800Z 
2021-07-14T09:52:01.896318600Z 3-user Stata network license expires 11 May 2022:
2021-07-14T09:52:01.896321300Z        Serial number:  501709312237
2021-07-14T09:52:01.896324100Z          Licensed to:  The Bennett Institute
2021-07-14T09:52:01.896327300Z                        Oxford University
2021-07-14T09:52:01.896921800Z 
2021-07-14T09:52:01.896932300Z Notes:
2021-07-14T09:52:01.896935900Z       1.  Unicode is supported; see help unicode_advice.
2021-07-14T09:52:01.896939200Z 
2021-07-14T09:52:01.896942300Z . do "analysis/WORMS_01_cr_analysis_dataset.wrapper.do" 
2021-07-14T09:52:01.896945800Z 
2021-07-14T09:52:01.896948900Z . . do "analysis/WORMS_01_cr_analysis_dataset.do" ""
2021-07-14T09:52:01.896952300Z 
2021-07-14T09:52:01.896955200Z . /*===========================================================================
2021-07-14T09:52:01.896958500Z > ===
2021-07-14T09:52:01.896961400Z > DO FILE NAME:                   WORMS_01_cr_analysis_dataset
2021-07-14T09:52:01.896964400Z > PROJECT:                                Exposure children and COVID risk
2021-07-14T09:52:01.896967500Z > DATE:                                   25th June 2020
2021-07-14T09:52:01.896970500Z > AUTHOR:                                 Harriet Forbes adapted from A Wong, A
2021-07-14T09:52:01.896974100Z >  Schultze, C Rentsch,
2021-07-14T09:52:01.896977400Z >                                                  K Baskharan, E Williamson
2021-07-14T09:52:01.896981100Z > DESCRIPTION OF FILE:    program 00, data management for project
2021-07-14T09:52:01.896984500Z >                                                 reformat variables
2021-07-14T09:52:01.896987500Z >                                                 categorise variables
2021-07-14T09:52:01.896990500Z >                                                 label variables
2021-07-14T09:52:01.896993800Z >                                                 apply exclusion criteria
2021-07-14T09:52:01.897020300Z > DATASETS USED:                  data in memory (from analysis/input.csv)
2021-07-14T09:52:01.897026800Z > DATASETS CREATED:               none
2021-07-14T09:52:01.897030100Z > OTHER OUTPUT:                   logfiles, printed to folder analysis/$logdir
2021-07-14T09:52:01.897033300Z > 
2021-07-14T09:52:01.897036100Z > =============================================================================
2021-07-14T09:52:01.897039400Z > =*/
2021-07-14T09:52:01.897042100Z . global outdir     "output"
2021-07-14T09:52:01.897045100Z 
2021-07-14T09:52:01.897048000Z . global logdir     "log"
2021-07-14T09:52:01.897050800Z 
2021-07-14T09:52:01.897053400Z . global tempdir    "tempdata"
2021-07-14T09:52:01.897056400Z 
2021-07-14T09:52:01.897059200Z . 
2021-07-14T09:52:01.897061900Z . * Open a log file
2021-07-14T09:52:01.897064600Z . cap log close
2021-07-14T09:52:01.897070600Z 
2021-07-14T09:52:01.897074200Z . log using $logdir/WORMS_01_cr_analysis_dataset, replace t
2021-07-14T09:52:01.897077700Z (note: file /workspace/log/WORMS_01_cr_analysis_dataset.log not found)
2021-07-14T09:52:01.897080900Z -------------------------------------------------------------------------------
2021-07-14T09:52:01.897083700Z       name:  <unnamed>
2021-07-14T09:52:01.897086700Z        log:  /workspace/log/WORMS_01_cr_analysis_dataset.log
2021-07-14T09:52:01.897090300Z   log type:  text
2021-07-14T09:52:01.897093300Z  opened on:  14 Jul 2021, 09:52:01
2021-07-14T09:52:01.897096100Z 
2021-07-14T09:52:01.901261800Z . 
2021-07-14T09:52:01.901277100Z . /* CONVERT STRINGS TO DATE===================================================
2021-07-14T09:52:01.901281200Z > =*/
2021-07-14T09:52:01.901284900Z . /* Comorb dates dates are given with month only, so adding day
2021-07-14T09:52:01.901287000Z > 15 to enable  them to be processed as dates                                  
2021-07-14T09:52:01.901289100Z >                                                      */
2021-07-14T09:52:01.901291300Z . *Import dataset into STATA
2021-07-14T09:52:01.901293200Z . import delimited "output/input_worms.csv", clear
2021-07-14T09:52:02.763628000Z (50 vars, 20,000 obs)
2021-07-14T09:52:02.763651600Z 
2021-07-14T09:52:02.763656800Z . 
2021-07-14T09:52:02.763660800Z . *cr date for diabetes based on adjudicated type
2021-07-14T09:52:02.763665300Z . gen diabetes=type1_diabetes if diabetes_type=="T1DM"
2021-07-14T09:52:02.768603500Z (19,877 missing values generated)
2021-07-14T09:52:02.768614000Z 
2021-07-14T09:52:02.768627000Z . replace diabetes=type2_diabetes if diabetes_type=="T2DM"
2021-07-14T09:52:02.770709200Z (794 real changes made)
2021-07-14T09:52:02.770719600Z 
2021-07-14T09:52:02.770722300Z . replace diabetes=unknown_diabetes if diabetes_type=="UNKNOWN_DM"
2021-07-14T09:52:02.772453300Z (81 real changes made)
2021-07-14T09:52:02.772463400Z 
2021-07-14T09:52:02.772465900Z . 
2021-07-14T09:52:02.772467900Z . drop type1_diabetes type2_diabetes unknown_diabetes
2021-07-14T09:52:02.773441200Z 
2021-07-14T09:52:02.773452400Z . 
2021-07-14T09:52:02.773456600Z . foreach var of varlist  chronic_respiratory_disease ///
2021-07-14T09:52:02.773459900Z >                                                 chronic_cardiac_disease  ///
2021-07-14T09:52:02.773463600Z >                                                 diabetes  ///
2021-07-14T09:52:02.773466200Z >                                                 cancer_haem  ///
2021-07-14T09:52:02.773468300Z >                                                 cancer_nonhaem  ///
2021-07-14T09:52:02.773470200Z >                                                 permanent_immunodeficiency  /
2021-07-14T09:52:02.773472200Z > //
2021-07-14T09:52:02.773474000Z >                                                 temporary_immunodeficiency  /
2021-07-14T09:52:02.773476500Z > //
2021-07-14T09:52:02.773479100Z >                                                 dialysis                     
2021-07-14T09:52:02.773482200Z >                    ///
2021-07-14T09:52:02.773485200Z >                                                 kidney_transplant            
2021-07-14T09:52:02.773488600Z >            ///
2021-07-14T09:52:02.773491600Z >                                                 other_transplant             
2021-07-14T09:52:02.773494700Z >            ///
2021-07-14T09:52:02.773497900Z >                                                 asplenia                     
2021-07-14T09:52:02.773501000Z >    ///
2021-07-14T09:52:02.773503700Z >                                                 chronic_liver_disease  ///
2021-07-14T09:52:02.773506900Z >                                                 other_neuro  ///
2021-07-14T09:52:02.773509900Z >                                                 stroke_dementia              
2021-07-14T09:52:02.773513100Z >            ///
2021-07-14T09:52:02.773516200Z >                                                 esrf  ///
2021-07-14T09:52:02.773519600Z >                                                 hypertension  ///
2021-07-14T09:52:02.773521700Z >                                                 ra_sle_psoriasis  ///
2021-07-14T09:52:02.773523700Z >                                                 bmi_date_measured   ///
2021-07-14T09:52:02.773533400Z >                                                 bp_sys_date_measured   ///
2021-07-14T09:52:02.773535500Z >                                                 bp_dias_date_measured   ///
2021-07-14T09:52:02.773538200Z >                                                 creatinine_date  ///
2021-07-14T09:52:02.773541300Z >                                                 smoking_status_date ///
2021-07-14T09:52:02.773544500Z >                                                 dereg_date ///
2021-07-14T09:52:02.773547400Z >                                                 worms ///
2021-07-14T09:52:02.773550400Z >                                                 {
2021-07-14T09:52:02.773553400Z   2. 
2021-07-14T09:52:02.773556300Z .                 capture confirm string variable `var'
2021-07-14T09:52:02.773559200Z   3.                 if _rc!=0 {
2021-07-14T09:52:02.773562200Z   4.                         assert `var'==.
2021-07-14T09:52:02.773566000Z   5.                         rename `var' `var'_date
2021-07-14T09:52:02.773569300Z   6.                 }
2021-07-14T09:52:02.773571300Z   7. 
2021-07-14T09:52:02.773573200Z .                 else {
2021-07-14T09:52:02.773576000Z   8.                                 replace `var' = `var' + "-15"
2021-07-14T09:52:02.773578300Z   9.                                 rename `var' `var'_dstr
2021-07-14T09:52:02.773580200Z  10.                                 replace `var'_dstr = " " if `var'_dstr == 
2021-07-14T09:52:02.773582200Z > "-15"
2021-07-14T09:52:02.773584300Z  11.                                 gen `var'_date = date(`var'_dstr, "YMD")
2021-07-14T09:52:02.773586400Z  12.                                 order `var'_date, after(`var'_dstr)
2021-07-14T09:52:02.773588400Z  13.                                 drop `var'_dstr
2021-07-14T09:52:02.773590400Z  14.                 }
2021-07-14T09:52:02.773592200Z  15. 
2021-07-14T09:52:02.773593900Z .         format `var'_date %td
2021-07-14T09:52:02.773595700Z  16. }
2021-07-14T09:52:02.781578700Z variable chronic_respiratory_disease was str7 now str10
2021-07-14T09:52:02.781596400Z (20,000 real changes made)
2021-07-14T09:52:02.819856400Z (16,000 real changes made)
2021-07-14T09:52:02.819873900Z (16,000 missing values generated)
2021-07-14T09:52:02.829179400Z variable chronic_cardiac_disease was str7 now str10
2021-07-14T09:52:02.829196600Z (20,000 real changes made)
2021-07-14T09:52:02.848764400Z (16,000 real changes made)
2021-07-14T09:52:02.848778700Z (16,000 missing values generated)
2021-07-14T09:52:02.848801500Z variable diabetes was str7 now str10
2021-07-14T09:52:02.848806200Z (20,000 real changes made)
2021-07-14T09:52:02.865138400Z (19,002 real changes made)
2021-07-14T09:52:02.865155300Z (19,002 missing values generated)
2021-07-14T09:52:02.865160000Z variable cancer_haem was str7 now str10
2021-07-14T09:52:02.865163800Z (20,000 real changes made)
2021-07-14T09:52:02.888481900Z (16,000 real changes made)
2021-07-14T09:52:02.888498700Z (16,000 missing values generated)
2021-07-14T09:52:02.888502400Z variable cancer_nonhaem was str7 now str10
2021-07-14T09:52:02.888505700Z (20,000 real changes made)
2021-07-14T09:52:02.906614400Z (16,000 real changes made)
2021-07-14T09:52:02.906642800Z (16,000 missing values generated)
2021-07-14T09:52:02.906648000Z variable permanent_immunodeficiency was str7 now str10
2021-07-14T09:52:02.906651600Z (20,000 real changes made)
2021-07-14T09:52:02.922768500Z (16,000 real changes made)
2021-07-14T09:52:02.922785000Z (16,000 missing values generated)
2021-07-14T09:52:02.922788800Z variable temporary_immunodeficiency was str7 now str10
2021-07-14T09:52:02.922807400Z (20,000 real changes made)
2021-07-14T09:52:02.938006400Z (16,000 real changes made)
2021-07-14T09:52:02.938020400Z (16,000 missing values generated)
2021-07-14T09:52:02.938022900Z variable dialysis was str7 now str10
2021-07-14T09:52:02.938024900Z (20,000 real changes made)
2021-07-14T09:52:02.955145700Z (16,000 real changes made)
2021-07-14T09:52:02.955161600Z (16,000 missing values generated)
2021-07-14T09:52:02.955204500Z variable kidney_transplant was str7 now str10
2021-07-14T09:52:02.955210200Z (20,000 real changes made)
2021-07-14T09:52:02.972601700Z (16,000 real changes made)
2021-07-14T09:52:02.972616300Z (16,000 missing values generated)
2021-07-14T09:52:02.972618900Z variable other_transplant was str7 now str10
2021-07-14T09:52:02.972621000Z (20,000 real changes made)
2021-07-14T09:52:02.995817800Z (16,000 real changes made)
2021-07-14T09:52:02.995838400Z (16,000 missing values generated)
2021-07-14T09:52:02.995842400Z variable asplenia was str7 now str10
2021-07-14T09:52:02.995845600Z (20,000 real changes made)
2021-07-14T09:52:03.016912900Z (16,000 real changes made)
2021-07-14T09:52:03.016930200Z (16,000 missing values generated)
2021-07-14T09:52:03.016934600Z variable chronic_liver_disease was str7 now str10
2021-07-14T09:52:03.016938200Z (20,000 real changes made)
2021-07-14T09:52:03.036070000Z (16,000 real changes made)
2021-07-14T09:52:03.036086600Z (16,000 missing values generated)
2021-07-14T09:52:03.036090100Z variable other_neuro was str7 now str10
2021-07-14T09:52:03.036093000Z (20,000 real changes made)
2021-07-14T09:52:03.057993600Z (16,000 real changes made)
2021-07-14T09:52:03.058025000Z (16,000 missing values generated)
2021-07-14T09:52:03.058030000Z variable stroke_dementia was str7 now str10
2021-07-14T09:52:03.058033700Z (20,000 real changes made)
2021-07-14T09:52:03.081550900Z (16,000 real changes made)
2021-07-14T09:52:03.081566300Z (16,000 missing values generated)
2021-07-14T09:52:03.081569800Z variable esrf was str7 now str10
2021-07-14T09:52:03.081572700Z (20,000 real changes made)
2021-07-14T09:52:03.102191700Z (16,000 real changes made)
2021-07-14T09:52:03.102215700Z (16,000 missing values generated)
2021-07-14T09:52:03.102220400Z variable hypertension was str7 now str10
2021-07-14T09:52:03.102223900Z (20,000 real changes made)
2021-07-14T09:52:03.118928500Z (16,000 real changes made)
2021-07-14T09:52:03.118944600Z (16,000 missing values generated)
2021-07-14T09:52:03.118948800Z variable ra_sle_psoriasis was str7 now str10
2021-07-14T09:52:03.118952100Z (20,000 real changes made)
2021-07-14T09:52:03.143138100Z (16,000 real changes made)
2021-07-14T09:52:03.143154500Z (16,000 missing values generated)
2021-07-14T09:52:03.143158500Z variable bmi_date_measured was str7 now str10
2021-07-14T09:52:03.143162500Z (20,000 real changes made)
2021-07-14T09:52:03.171081200Z (1,000 real changes made)
2021-07-14T09:52:03.171096900Z (1,000 missing values generated)
2021-07-14T09:52:03.171099500Z variable bp_sys_date_measured was str7 now str10
2021-07-14T09:52:03.171101600Z (20,000 real changes made)
2021-07-14T09:52:03.194826800Z (1,000 real changes made)
2021-07-14T09:52:03.194849400Z (1,000 missing values generated)
2021-07-14T09:52:03.194853500Z variable bp_dias_date_measured was str7 now str10
2021-07-14T09:52:03.194855700Z (20,000 real changes made)
2021-07-14T09:52:03.219261200Z (1,000 real changes made)
2021-07-14T09:52:03.219278100Z (1,000 missing values generated)
2021-07-14T09:52:03.219281900Z variable creatinine_date was str7 now str10
2021-07-14T09:52:03.219284800Z (20,000 real changes made)
2021-07-14T09:52:03.242352300Z (1,000 real changes made)
2021-07-14T09:52:03.242377400Z (1,000 missing values generated)
2021-07-14T09:52:03.242380700Z variable smoking_status_date was str7 now str10
2021-07-14T09:52:03.242382700Z (20,000 real changes made)
2021-07-14T09:52:03.260597400Z (16,182 real changes made)
2021-07-14T09:52:03.260613000Z (16,182 missing values generated)
2021-07-14T09:52:03.260616700Z variable dereg_date was str7 now str10
2021-07-14T09:52:03.260619800Z (20,000 real changes made)
2021-07-14T09:52:03.281003600Z (19,882 real changes made)
2021-07-14T09:52:03.281022600Z (19,882 missing values generated)
2021-07-14T09:52:03.281037900Z variable worms was str7 now str10
2021-07-14T09:52:03.281041700Z (20,000 real changes made)
2021-07-14T09:52:03.294598000Z (16,000 real changes made)
2021-07-14T09:52:03.294619500Z (16,000 missing values generated)
2021-07-14T09:52:03.294623500Z 
2021-07-14T09:52:03.294626100Z . 
2021-07-14T09:52:03.294628700Z . * Recode to dates from the strings
2021-07-14T09:52:03.294631400Z . foreach var of varlist  died_date_ons                           {
2021-07-14T09:52:03.294634000Z   2. 
2021-07-14T09:52:03.294652600Z .         confirm string variable `var'
2021-07-14T09:52:03.294656800Z   3.         rename `var' `var'_dstr
2021-07-14T09:52:03.294659600Z   4.         gen `var' = date(`var'_dstr, "YMD")
2021-07-14T09:52:03.294662000Z   5.         drop `var'_dstr
2021-07-14T09:52:03.294665400Z   6.         format `var' %td
2021-07-14T09:52:03.294667900Z   7. 
2021-07-14T09:52:03.294671400Z . }
2021-07-14T09:52:03.302844900Z (16,082 missing values generated)
2021-07-14T09:52:03.302869000Z 
2021-07-14T09:52:03.302873200Z . 
2021-07-14T09:52:03.302876500Z . /*Tab all variables in initial extract*/
2021-07-14T09:52:03.302879700Z . sum, d f
2021-07-14T09:52:03.304513200Z 
2021-07-14T09:52:03.304530000Z                        dereg_date_date
2021-07-14T09:52:03.304534800Z -------------------------------------------------------------
2021-07-14T09:52:03.304538400Z       Percentiles      Smallest
2021-07-14T09:52:03.304541600Z  1%    15feb2020      15feb2020
2021-07-14T09:52:03.304544700Z  5%    15feb2020      15feb2020
2021-07-14T09:52:03.304548100Z 10%    15mar2020      15feb2020       Obs                 118
2021-07-14T09:52:03.304551400Z 25%    15may2020      15feb2020       Sum of Wgt.         118
2021-07-14T09:52:03.304554500Z 
2021-07-14T09:52:03.304557400Z 50%    15sep2020                      Mean          06oct2020
2021-07-14T09:52:03.304560500Z                         Largest       Std. Dev.      153.5487
2021-07-14T09:52:03.304563500Z 75%    15feb2021      15jul2021
2021-07-14T09:52:03.307556200Z 90%    15may2021      15jul2021       Variance       23577.21
2021-07-14T09:52:03.307571300Z 95%    15jun2021      15jul2021       Skewness       .1426175
2021-07-14T09:52:03.307574300Z 99%    15jul2021      15jul2021       Kurtosis       1.833505
2021-07-14T09:52:03.307576400Z 
2021-07-14T09:52:03.307578300Z                          worms_date
2021-07-14T09:52:03.307580200Z -------------------------------------------------------------
2021-07-14T09:52:03.307582400Z       Percentiles      Smallest
2021-07-14T09:52:03.307592700Z  1%    15feb2019      15feb2019
2021-07-14T09:52:03.307596000Z  5%    15mar2019      15feb2019
2021-07-14T09:52:03.307599000Z 10%    15may2019      15feb2019       Obs               4,000
2021-07-14T09:52:03.307601900Z 25%    15sep2019      15feb2019       Sum of Wgt.       4,000
2021-07-14T09:52:03.307605100Z 
2021-07-14T09:52:03.318335200Z 50%    15may2020                      Mean          01may2020
2021-07-14T09:52:03.318356800Z                         Largest       Std. Dev.      258.7681
2021-07-14T09:52:03.318361600Z 75%    15dec2020      15jul2021
2021-07-14T09:52:03.318365100Z 90%    15apr2021      15jul2021       Variance       66960.94
2021-07-14T09:52:03.318368400Z 95%    15jun2021      15jul2021       Skewness      -.0139481
2021-07-14T09:52:03.318371500Z 99%    15jul2021      15jul2021       Kurtosis       1.795046
2021-07-14T09:52:03.318375000Z 
2021-07-14T09:52:03.318378500Z                        ethnicity_date
2021-07-14T09:52:03.318381800Z -------------------------------------------------------------
2021-07-14T09:52:03.318384800Z       Percentiles      Smallest
2021-07-14T09:52:03.318387600Z  1%         1970           1970
2021-07-14T09:52:03.320129500Z  5%         1972           1970
2021-07-14T09:52:03.320141700Z 10%         1975           1970       Obs              15,000
2021-07-14T09:52:03.320146200Z 25%         1982           1970       Sum of Wgt.      15,000
2021-07-14T09:52:03.320148500Z 
2021-07-14T09:52:03.320150400Z 50%         1995                      Mean           1995.222
2021-07-14T09:52:03.320152400Z                         Largest       Std. Dev.      14.89491
2021-07-14T09:52:03.320154400Z 75%         2008           2021
2021-07-14T09:52:03.320156400Z 90%         2016           2021       Variance       221.8583
2021-07-14T09:52:03.320158400Z 95%         2018           2021       Skewness       .0008828
2021-07-14T09:52:03.320160400Z 99%         2021           2021       Kurtosis       1.800422
2021-07-14T09:52:03.320162300Z 
2021-07-14T09:52:03.342149500Z                    bmi_date_measured_date
2021-07-14T09:52:03.342170300Z -------------------------------------------------------------
2021-07-14T09:52:03.342174500Z       Percentiles      Smallest
2021-07-14T09:52:03.342177900Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.342181000Z  5%    15aug1972      15jan1970
2021-07-14T09:52:03.342184300Z 10%    15feb1975      15jan1970       Obs              19,000
2021-07-14T09:52:03.342187800Z 25%    30aug1982      15jan1970       Sum of Wgt.      19,000
2021-07-14T09:52:03.342191100Z 
2021-07-14T09:52:03.342194200Z 50%    15jul1995                      Mean          17aug1995
2021-07-14T09:52:03.342197700Z                         Largest       Std. Dev.      5438.288
2021-07-14T09:52:03.342217600Z 75%    15jul2008      15jul2021
2021-07-14T09:52:03.360273200Z 90%    15may2016      15jul2021       Variance       2.96e+07
2021-07-14T09:52:03.360292300Z 95%    15dec2018      15jul2021       Skewness       .0178447
2021-07-14T09:52:03.360296400Z 99%    15dec2020      15jul2021       Kurtosis       1.792662
2021-07-14T09:52:03.360300100Z 
2021-07-14T09:52:03.360302700Z                   bp_sys_date_measured_date
2021-07-14T09:52:03.360304700Z -------------------------------------------------------------
2021-07-14T09:52:03.360306900Z       Percentiles      Smallest
2021-07-14T09:52:03.360308800Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.360310700Z  5%    15jun1972      15jan1970
2021-07-14T09:52:03.360312500Z 10%    15jan1975      15jan1970       Obs              19,000
2021-07-14T09:52:03.360314400Z 25%    15jul1982      15jan1970       Sum of Wgt.      19,000
2021-07-14T09:52:03.360316400Z 
2021-07-14T09:52:03.376464600Z 50%    30jun1994                      Mean          08aug1994
2021-07-14T09:52:03.376484000Z                         Largest       Std. Dev.      5164.386
2021-07-14T09:52:03.376487800Z 75%    15nov2006      15jan2019
2021-07-14T09:52:03.376505300Z 90%    15dec2013      15jan2019       Variance       2.67e+07
2021-07-14T09:52:03.376509400Z 95%    15aug2016      15jan2019       Skewness      -.0018102
2021-07-14T09:52:03.376512200Z 99%    15aug2018      15jan2019       Kurtosis       1.802138
2021-07-14T09:52:03.376514800Z 
2021-07-14T09:52:03.376517200Z                  bp_dias_date_measured_date
2021-07-14T09:52:03.376519800Z -------------------------------------------------------------
2021-07-14T09:52:03.376522600Z       Percentiles      Smallest
2021-07-14T09:52:03.376525200Z  1%    15jun1970      15jan1970
2021-07-14T09:52:03.376527700Z  5%    15jun1972      15jan1970
2021-07-14T09:52:03.376530300Z 10%    30oct1974      15jan1970       Obs              19,000
2021-07-14T09:52:03.376532900Z 25%    15mar1982      15jan1970       Sum of Wgt.      19,000
2021-07-14T09:52:03.376535500Z 
2021-07-14T09:52:03.376537800Z 50%    15apr1994                      Mean          31may1994
2021-07-14T09:52:03.376540300Z                         Largest       Std. Dev.      5178.528
2021-07-14T09:52:03.376543100Z 75%    15oct2006      15jan2019
2021-07-14T09:52:03.376545600Z 90%    15feb2014      15jan2019       Variance       2.68e+07
2021-07-14T09:52:03.376548300Z 95%    15jul2016      15jan2019       Skewness       .0156867
2021-07-14T09:52:03.392874900Z 99%    30jul2018      15jan2019       Kurtosis       1.793338
2021-07-14T09:52:03.392890700Z 
2021-07-14T09:52:03.392893400Z                     creatinine_date_date
2021-07-14T09:52:03.392906500Z -------------------------------------------------------------
2021-07-14T09:52:03.392908800Z       Percentiles      Smallest
2021-07-14T09:52:03.392910700Z  1%    15mar2018      15mar2018
2021-07-14T09:52:03.392912700Z  5%    15mar2018      15mar2018
2021-07-14T09:52:03.392914600Z 10%    15apr2018      15mar2018       Obs              19,000
2021-07-14T09:52:03.392916600Z 25%    15may2018      15mar2018       Sum of Wgt.      19,000
2021-07-14T09:52:03.392918600Z 
2021-07-14T09:52:03.392920400Z 50%    15aug2018                      Mean          15aug2018
2021-07-14T09:52:03.392922300Z                         Largest       Std. Dev.      96.96789
2021-07-14T09:52:03.392924200Z 75%    15nov2018      15jan2019
2021-07-14T09:52:03.396939800Z 90%    15dec2018      15jan2019       Variance       9402.772
2021-07-14T09:52:03.396957300Z 95%    15jan2019      15jan2019       Skewness      -.0058521
2021-07-14T09:52:03.396960200Z 99%    15jan2019      15jan2019       Kurtosis       1.769828
2021-07-14T09:52:03.396962400Z 
2021-07-14T09:52:03.396964300Z                   smoking_status_date_date
2021-07-14T09:52:03.396966300Z -------------------------------------------------------------
2021-07-14T09:52:03.396968400Z       Percentiles      Smallest
2021-07-14T09:52:03.396970400Z  1%    15may1970      15jan1970
2021-07-14T09:52:03.396972300Z  5%    15jul1972      15jan1970
2021-07-14T09:52:03.396974200Z 10%    15jan1975      15jan1970       Obs               3,818
2021-07-14T09:52:03.400933000Z 25%    15apr1982      15jan1970       Sum of Wgt.       3,818
2021-07-14T09:52:03.400946300Z 
2021-07-14T09:52:03.400949000Z 50%    30dec1993                      Mean          27apr1994
2021-07-14T09:52:03.400951200Z                         Largest       Std. Dev.      5132.978
2021-07-14T09:52:03.400953500Z 75%    15mar2006      15jan2019
2021-07-14T09:52:03.400955400Z 90%    15dec2013      15jan2019       Variance       2.63e+07
2021-07-14T09:52:03.400957500Z 95%    15jun2016      15jan2019       Skewness       .0235891
2021-07-14T09:52:03.400959500Z 99%    15aug2018      15jan2019       Kurtosis       1.826229
2021-07-14T09:52:03.400961500Z 
2021-07-14T09:52:03.400963400Z               chronic_respiratory_disease_date
2021-07-14T09:52:03.400965200Z -------------------------------------------------------------
2021-07-14T09:52:03.400967100Z       Percentiles      Smallest
2021-07-14T09:52:03.400969000Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.400972000Z  5%    30aug1972      15jan1970
2021-07-14T09:52:03.400974000Z 10%    30nov1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.400976000Z 25%    15jul1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.400984700Z 
2021-07-14T09:52:03.400986700Z 50%    15jan1995                      Mean          11oct1994
2021-07-14T09:52:03.400988700Z                         Largest       Std. Dev.      5173.715
2021-07-14T09:52:03.400990600Z 75%    15apr2007      15jan2019
2021-07-14T09:52:03.400992400Z 90%    15mar2014      15jan2019       Variance       2.68e+07
2021-07-14T09:52:03.400994400Z 95%    15jul2016      15jan2019       Skewness        -.02126
2021-07-14T09:52:03.403835500Z 99%    15jul2018      15jan2019       Kurtosis       1.783755
2021-07-14T09:52:03.403846600Z 
2021-07-14T09:52:03.403849200Z                 chronic_cardiac_disease_date
2021-07-14T09:52:03.403851300Z -------------------------------------------------------------
2021-07-14T09:52:03.403853300Z       Percentiles      Smallest
2021-07-14T09:52:03.403855300Z  1%    15aug1970      15jan1970
2021-07-14T09:52:03.403857300Z  5%    15apr1972      15jan1970
2021-07-14T09:52:03.403859100Z 10%    15nov1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.403861100Z 25%    15aug1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.403863000Z 
2021-07-14T09:52:03.403864800Z 50%    15may1994                      Mean          27jun1994
2021-07-14T09:52:03.403866700Z                         Largest       Std. Dev.       5159.71
2021-07-14T09:52:03.403868700Z 75%    15sep2006      15dec2018
2021-07-14T09:52:03.404751200Z 90%    15feb2014      15jan2019       Variance       2.66e+07
2021-07-14T09:52:03.404762000Z 95%    15jun2016      15jan2019       Skewness      -.0050546
2021-07-14T09:52:03.404765900Z 99%    15jul2018      15jan2019       Kurtosis       1.808086
2021-07-14T09:52:03.404768900Z 
2021-07-14T09:52:03.404771600Z                    hba1c_mmol_per_mol_date
2021-07-14T09:52:03.404774400Z -------------------------------------------------------------
2021-07-14T09:52:03.404777300Z no observations
2021-07-14T09:52:03.404780100Z 
2021-07-14T09:52:03.404782700Z                     hba1c_percentage_date
2021-07-14T09:52:03.404785500Z -------------------------------------------------------------
2021-07-14T09:52:03.404788400Z no observations
2021-07-14T09:52:03.404791200Z 
2021-07-14T09:52:03.404793800Z                       cancer_haem_date
2021-07-14T09:52:03.407086200Z -------------------------------------------------------------
2021-07-14T09:52:03.407096300Z       Percentiles      Smallest
2021-07-14T09:52:03.407098900Z  1%    15jun1970      15jan1970
2021-07-14T09:52:03.407101500Z  5%    15jun1972      15jan1970
2021-07-14T09:52:03.407103500Z 10%    15oct1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.407105500Z 25%    15apr1982      15feb1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.407112900Z 
2021-07-14T09:52:03.407114800Z 50%    15aug1994                      Mean          27jul1994
2021-07-14T09:52:03.407116800Z                         Largest       Std. Dev.      5188.417
2021-07-14T09:52:03.407118800Z 75%    15dec2006      15jan2019
2021-07-14T09:52:03.407120700Z 90%    15jan2014      15jan2019       Variance       2.69e+07
2021-07-14T09:52:03.409870300Z 95%    30aug2016      15jan2019       Skewness      -.0134059
2021-07-14T09:52:03.409884800Z 99%    15jul2018      15jan2019       Kurtosis       1.795196
2021-07-14T09:52:03.409889300Z 
2021-07-14T09:52:03.409892700Z                      cancer_nonhaem_date
2021-07-14T09:52:03.409896000Z -------------------------------------------------------------
2021-07-14T09:52:03.409899300Z       Percentiles      Smallest
2021-07-14T09:52:03.409902600Z  1%    15aug1970      15jan1970
2021-07-14T09:52:03.409905900Z  5%    15jul1972      15jan1970
2021-07-14T09:52:03.409908900Z 10%    15dec1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.409911000Z 25%    15feb1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.409912900Z 
2021-07-14T09:52:03.409914700Z 50%    15mar1994                      Mean          28may1994
2021-07-14T09:52:03.414331700Z                         Largest       Std. Dev.      5160.273
2021-07-14T09:52:03.414346100Z 75%    15aug2006      15jan2019
2021-07-14T09:52:03.414348800Z 90%    15dec2013      15jan2019       Variance       2.66e+07
2021-07-14T09:52:03.414350900Z 95%    15may2016      15jan2019       Skewness       .0056852
2021-07-14T09:52:03.414352900Z 99%    15jul2018      15jan2019       Kurtosis       1.792741
2021-07-14T09:52:03.414354900Z 
2021-07-14T09:52:03.414356900Z                permanent_immunodeficiency_date
2021-07-14T09:52:03.414358800Z -------------------------------------------------------------
2021-07-14T09:52:03.414360800Z       Percentiles      Smallest
2021-07-14T09:52:03.414362800Z  1%    15aug1970      15jan1970
2021-07-14T09:52:03.414364600Z  5%    15sep1972      15feb1970
2021-07-14T09:52:03.415227600Z 10%    15jan1975      15feb1970       Obs               4,000
2021-07-14T09:52:03.415261500Z 25%    15feb1982      15feb1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.415280300Z 
2021-07-14T09:52:03.415285000Z 50%    15may1994                      Mean          20jul1994
2021-07-14T09:52:03.415288500Z                         Largest       Std. Dev.      5181.671
2021-07-14T09:52:03.415291800Z 75%    15sep2006      15jan2019
2021-07-14T09:52:03.415295000Z 90%    15aug2014      15jan2019       Variance       2.68e+07
2021-07-14T09:52:03.415298300Z 95%    15oct2016      15jan2019       Skewness       .0280276
2021-07-14T09:52:03.415313000Z 99%    15sep2018      15jan2019       Kurtosis       1.806083
2021-07-14T09:52:03.415317000Z 
2021-07-14T09:52:03.415320300Z                         asplenia_date
2021-07-14T09:52:03.418027300Z -------------------------------------------------------------
2021-07-14T09:52:03.418048700Z       Percentiles      Smallest
2021-07-14T09:52:03.418052500Z  1%    30jun1970      15jan1970
2021-07-14T09:52:03.418055300Z  5%    15jun1972      15jan1970
2021-07-14T09:52:03.418058700Z 10%    15dec1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.418061400Z 25%    15jan1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.418064200Z 
2021-07-14T09:52:03.418066900Z 50%    15mar1994                      Mean          02jun1994
2021-07-14T09:52:03.418070100Z                         Largest       Std. Dev.      5201.697
2021-07-14T09:52:03.418073000Z 75%    30oct2006      15jan2019
2021-07-14T09:52:03.418075600Z 90%    15mar2014      15jan2019       Variance       2.71e+07
2021-07-14T09:52:03.421176900Z 95%    15oct2016      15jan2019       Skewness       .0253015
2021-07-14T09:52:03.421192600Z 99%    15aug2018      15jan2019       Kurtosis       1.791137
2021-07-14T09:52:03.421197300Z 
2021-07-14T09:52:03.421200300Z                temporary_immunodeficiency_date
2021-07-14T09:52:03.421202300Z -------------------------------------------------------------
2021-07-14T09:52:03.421204400Z       Percentiles      Smallest
2021-07-14T09:52:03.421206500Z  1%    15mar2018      15mar2018
2021-07-14T09:52:03.421208500Z  5%    15mar2018      15mar2018
2021-07-14T09:52:03.421210300Z 10%    15apr2018      15mar2018       Obs               4,000
2021-07-14T09:52:03.421212400Z 25%    15may2018      15mar2018       Sum of Wgt.       4,000
2021-07-14T09:52:03.421214300Z 
2021-07-14T09:52:03.421216200Z 50%    15aug2018                      Mean          12aug2018
2021-07-14T09:52:03.423911700Z                         Largest       Std. Dev.       96.5087
2021-07-14T09:52:03.423922400Z 75%    15nov2018      15jan2019
2021-07-14T09:52:03.423925100Z 90%    15dec2018      15jan2019       Variance       9313.928
2021-07-14T09:52:03.423927200Z 95%    15jan2019      15jan2019       Skewness       .0571288
2021-07-14T09:52:03.423929200Z 99%    15jan2019      15jan2019       Kurtosis       1.771939
2021-07-14T09:52:03.423931200Z 
2021-07-14T09:52:03.423933100Z                  chronic_liver_disease_date
2021-07-14T09:52:03.423935100Z -------------------------------------------------------------
2021-07-14T09:52:03.423937100Z       Percentiles      Smallest
2021-07-14T09:52:03.423939000Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.423941000Z  5%    15apr1972      15jan1970
2021-07-14T09:52:03.424444400Z 10%    15jan1975      15jan1970       Obs               4,000
2021-07-14T09:52:03.424455000Z 25%    15jun1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.424459300Z 
2021-07-14T09:52:03.424462600Z 50%    15apr1994                      Mean          07jul1994
2021-07-14T09:52:03.424465800Z                         Largest       Std. Dev.      5171.309
2021-07-14T09:52:03.424468600Z 75%    15aug2006      15jan2019
2021-07-14T09:52:03.424470700Z 90%    15dec2013      15jan2019       Variance       2.67e+07
2021-07-14T09:52:03.424472700Z 95%    15sep2016      15jan2019       Skewness       .0152498
2021-07-14T09:52:03.424474600Z 99%    15aug2018      15jan2019       Kurtosis       1.803171
2021-07-14T09:52:03.424476600Z 
2021-07-14T09:52:03.424478400Z                     stroke_dementia_date
2021-07-14T09:52:03.426482800Z -------------------------------------------------------------
2021-07-14T09:52:03.426492400Z       Percentiles      Smallest
2021-07-14T09:52:03.426495100Z  1%    15jun1970      15jan1970
2021-07-14T09:52:03.426497200Z  5%    15may1972      15jan1970
2021-07-14T09:52:03.426499200Z 10%    15jan1975      15jan1970       Obs               4,000
2021-07-14T09:52:03.426501200Z 25%    15jun1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.426503300Z 
2021-07-14T09:52:03.426505100Z 50%    15nov1994                      Mean          03aug1994
2021-07-14T09:52:03.426507400Z                         Largest       Std. Dev.      5145.996
2021-07-14T09:52:03.426509400Z 75%    30aug2006      15jan2019
2021-07-14T09:52:03.426511300Z 90%    15jan2014      15jan2019       Variance       2.65e+07
2021-07-14T09:52:03.429393400Z 95%    15sep2016      15jan2019       Skewness      -.0144179
2021-07-14T09:52:03.429411400Z 99%    15sep2018      15jan2019       Kurtosis        1.82249
2021-07-14T09:52:03.429415900Z 
2021-07-14T09:52:03.429419300Z                       other_neuro_date
2021-07-14T09:52:03.429422300Z -------------------------------------------------------------
2021-07-14T09:52:03.429424500Z       Percentiles      Smallest
2021-07-14T09:52:03.429426600Z  1%    30jun1970      15jan1970
2021-07-14T09:52:03.429428400Z  5%    15may1972      15jan1970
2021-07-14T09:52:03.429430400Z 10%    15jul1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.429432300Z 25%    15nov1981      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.429434200Z 
2021-07-14T09:52:03.429436000Z 50%    15may1994                      Mean          23jun1994
2021-07-14T09:52:03.432583500Z                         Largest       Std. Dev.      5265.789
2021-07-14T09:52:03.432598700Z 75%    30jan2007      15jan2019
2021-07-14T09:52:03.432612700Z 90%    15jun2014      15jan2019       Variance       2.77e+07
2021-07-14T09:52:03.432616600Z 95%    15oct2016      15jan2019       Skewness       .0107299
2021-07-14T09:52:03.432619600Z 99%    15aug2018      15jan2019       Kurtosis       1.765175
2021-07-14T09:52:03.432622600Z 
2021-07-14T09:52:03.432625700Z                           esrf_date
2021-07-14T09:52:03.432628900Z -------------------------------------------------------------
2021-07-14T09:52:03.432632100Z       Percentiles      Smallest
2021-07-14T09:52:03.432634200Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.432636100Z  5%    30may1972      15jan1970
2021-07-14T09:52:03.433329000Z 10%    15oct1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.433341700Z 25%    30oct1981      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.433346400Z 
2021-07-14T09:52:03.433349600Z 50%    15jul1994                      Mean          09may1994
2021-07-14T09:52:03.433352600Z                         Largest       Std. Dev.       5164.46
2021-07-14T09:52:03.433355800Z 75%    15may2006      15jan2019
2021-07-14T09:52:03.433359000Z 90%    15jan2014      15jan2019       Variance       2.67e+07
2021-07-14T09:52:03.433362000Z 95%    15jun2016      15jan2019       Skewness       .0075467
2021-07-14T09:52:03.433365000Z 99%    15aug2018      15jan2019       Kurtosis       1.800719
2021-07-14T09:52:03.433368300Z 
2021-07-14T09:52:03.433371300Z                         dialysis_date
2021-07-14T09:52:03.435914500Z -------------------------------------------------------------
2021-07-14T09:52:03.435928800Z       Percentiles      Smallest
2021-07-14T09:52:03.435933100Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.435936100Z  5%    15sep1972      15jan1970
2021-07-14T09:52:03.435939100Z 10%    15may1975      15jan1970       Obs               4,000
2021-07-14T09:52:03.435942300Z 25%    15aug1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.435945400Z 
2021-07-14T09:52:03.435948500Z 50%    15may1995                      Mean          03may1995
2021-07-14T09:52:03.435951600Z                         Largest       Std. Dev.      5290.615
2021-07-14T09:52:03.435956400Z 75%    30jan2008      15jan2020
2021-07-14T09:52:03.435959500Z 90%    01mar2015      15jan2020       Variance       2.80e+07
2021-07-14T09:52:03.439112200Z 95%    15aug2017      15jan2020       Skewness      -.0204302
2021-07-14T09:52:03.439122100Z 99%    15aug2019      15jan2020       Kurtosis       1.773018
2021-07-14T09:52:03.439125200Z 
2021-07-14T09:52:03.439127200Z                    kidney_transplant_date
2021-07-14T09:52:03.439129100Z -------------------------------------------------------------
2021-07-14T09:52:03.439131100Z       Percentiles      Smallest
2021-07-14T09:52:03.439139700Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.439143000Z  5%    15jul1972      15jan1970
2021-07-14T09:52:03.439145900Z 10%    15apr1975      15jan1970       Obs               4,000
2021-07-14T09:52:03.439148700Z 25%    30nov1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.439178700Z 
2021-07-14T09:52:03.439182700Z 50%    15dec1994                      Mean          07feb1995
2021-07-14T09:52:03.441763700Z                         Largest       Std. Dev.      5233.519
2021-07-14T09:52:03.441775800Z 75%    15aug2007      15jan2020
2021-07-14T09:52:03.441779900Z 90%    15nov2014      15jan2020       Variance       2.74e+07
2021-07-14T09:52:03.441783300Z 95%    15may2017      15jan2020       Skewness       -.000794
2021-07-14T09:52:03.441786400Z 99%    30aug2019      15jan2020       Kurtosis       1.819048
2021-07-14T09:52:03.441788600Z 
2021-07-14T09:52:03.441790600Z                     other_transplant_date
2021-07-14T09:52:03.441792500Z -------------------------------------------------------------
2021-07-14T09:52:03.441794500Z       Percentiles      Smallest
2021-07-14T09:52:03.441796400Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.441798200Z  5%    15jul1972      15jan1970
2021-07-14T09:52:03.442241000Z 10%    15feb1975      15jan1970       Obs               4,000
2021-07-14T09:52:03.442250100Z 25%    15jun1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.442252900Z 
2021-07-14T09:52:03.442254900Z 50%    15dec1994                      Mean          04jan1995
2021-07-14T09:52:03.442256900Z                         Largest       Std. Dev.      5305.688
2021-07-14T09:52:03.442259000Z 75%    30oct2007      15jan2020
2021-07-14T09:52:03.442261100Z 90%    30mar2015      15jan2020       Variance       2.82e+07
2021-07-14T09:52:03.442263000Z 95%    15sep2017      15jan2020       Skewness       .0155826
2021-07-14T09:52:03.442265000Z 99%    15aug2019      15jan2020       Kurtosis       1.791197
2021-07-14T09:52:03.442266900Z 
2021-07-14T09:52:03.442268800Z                       hypertension_date
2021-07-14T09:52:03.444321300Z -------------------------------------------------------------
2021-07-14T09:52:03.444332600Z       Percentiles      Smallest
2021-07-14T09:52:03.444337100Z  1%    30jun1970      15jan1970
2021-07-14T09:52:03.444340200Z  5%    30mar1972      15jan1970
2021-07-14T09:52:03.444342200Z 10%    15feb1975      15jan1970       Obs               4,000
2021-07-14T09:52:03.444344300Z 25%    15oct1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.444346400Z 
2021-07-14T09:52:03.444348300Z 50%    15jan1996                      Mean          23nov1995
2021-07-14T09:52:03.444355500Z                         Largest       Std. Dev.      5473.427
2021-07-14T09:52:03.444357700Z 75%    15dec2008      15jun2021
2021-07-14T09:52:03.444359500Z 90%    15jun2016      15jun2021       Variance       3.00e+07
2021-07-14T09:52:03.448365300Z 95%    15oct2018      15jul2021       Skewness      -.0272552
2021-07-14T09:52:03.448378100Z 99%    15nov2020      15jul2021       Kurtosis       1.780957
2021-07-14T09:52:03.448382200Z 
2021-07-14T09:52:03.448385100Z                     ra_sle_psoriasis_date
2021-07-14T09:52:03.448388000Z -------------------------------------------------------------
2021-07-14T09:52:03.448391100Z       Percentiles      Smallest
2021-07-14T09:52:03.448394200Z  1%    15jul1970      15jan1970
2021-07-14T09:52:03.448397300Z  5%    15jul1972      15jan1970
2021-07-14T09:52:03.448400300Z 10%    15dec1974      15jan1970       Obs               4,000
2021-07-14T09:52:03.448403300Z 25%    15aug1982      15jan1970       Sum of Wgt.       4,000
2021-07-14T09:52:03.448406300Z 
2021-07-14T09:52:03.448409000Z 50%    15may1994                      Mean          13aug1994
2021-07-14T09:52:03.460935400Z                         Largest       Std. Dev.      5158.236
2021-07-14T09:52:03.460957100Z 75%    15dec2006      15jan2019
2021-07-14T09:52:03.460959900Z 90%    15mar2014      15jan2019       Variance       2.66e+07
2021-07-14T09:52:03.460962000Z 95%    15sep2016      15jan2019       Skewness       .0128047
2021-07-14T09:52:03.460964000Z 99%    15aug2018      15jan2019       Kurtosis       1.816135
2021-07-14T09:52:03.460965900Z 
2021-07-14T09:52:03.460967800Z                              age
2021-07-14T09:52:03.460969700Z -------------------------------------------------------------
2021-07-14T09:52:03.460971600Z       Percentiles      Smallest
2021-07-14T09:52:03.460973500Z  1%            0              0
2021-07-14T09:52:03.460975300Z  5%            4              0
2021-07-14T09:52:03.461085200Z 10%            8              0       Obs              20,000
2021-07-14T09:52:03.461092500Z 25%           21              0       Sum of Wgt.      20,000
2021-07-14T09:52:03.461094800Z 
2021-07-14T09:52:03.461096600Z 50%           40                      Mean            40.2635
2021-07-14T09:52:03.461098500Z                         Largest       Std. Dev.      23.74401
2021-07-14T09:52:03.461100400Z 75%           59            105
2021-07-14T09:52:03.461102400Z 90%           73            106       Variance       563.7782
2021-07-14T09:52:03.461104300Z 95%           80            107       Skewness       .1282282
2021-07-14T09:52:03.461106200Z 99%           89            108       Kurtosis       2.055111
2021-07-14T09:52:03.461108100Z 
2021-07-14T09:52:03.461109900Z                              sex
2021-07-14T09:52:03.467641700Z -------------------------------------------------------------
2021-07-14T09:52:03.467657800Z no observations
2021-07-14T09:52:03.467662000Z 
2021-07-14T09:52:03.467665100Z                              imd
2021-07-14T09:52:03.467668200Z -------------------------------------------------------------
2021-07-14T09:52:03.467671300Z       Percentiles      Smallest
2021-07-14T09:52:03.467674700Z  1%          100            100
2021-07-14T09:52:03.467677600Z  5%          100            100
2021-07-14T09:52:03.467680600Z 10%          100            100       Obs              20,000
2021-07-14T09:52:03.467683800Z 25%          200            100       Sum of Wgt.      20,000
2021-07-14T09:52:03.467686800Z 
2021-07-14T09:52:03.467689500Z 50%          300                      Mean            259.815
2021-07-14T09:52:03.473803800Z                         Largest       Std. Dev.      66.42956
2021-07-14T09:52:03.473816500Z 75%          300            300
2021-07-14T09:52:03.473819200Z 90%          300            300       Variance       4412.886
2021-07-14T09:52:03.473821300Z 95%          300            300       Skewness      -1.390841
2021-07-14T09:52:03.473823200Z 99%          300            300       Kurtosis       3.590921
2021-07-14T09:52:03.473825100Z 
2021-07-14T09:52:03.473827100Z                              stp
2021-07-14T09:52:03.473828900Z -------------------------------------------------------------
2021-07-14T09:52:03.473830900Z no observations
2021-07-14T09:52:03.473832700Z 
2021-07-14T09:52:03.473834400Z                           ethnicity
2021-07-14T09:52:03.473836200Z -------------------------------------------------------------
2021-07-14T09:52:03.473838100Z       Percentiles      Smallest
2021-07-14T09:52:03.473839900Z  1%            1              1
2021-07-14T09:52:03.474612400Z  5%            1              1
2021-07-14T09:52:03.474619600Z 10%            1              1       Obs              15,000
2021-07-14T09:52:03.474622000Z 25%            1              1       Sum of Wgt.      15,000
2021-07-14T09:52:03.474624000Z 
2021-07-14T09:52:03.474625700Z 50%            1                      Mean           1.577067
2021-07-14T09:52:03.474627600Z                         Largest       Std. Dev.      1.258743
2021-07-14T09:52:03.474629600Z 75%            1              5
2021-07-14T09:52:03.474631500Z 90%            3              5       Variance       1.584433
2021-07-14T09:52:03.474633500Z 95%            5              5       Skewness        1.98201
2021-07-14T09:52:03.474635400Z 99%            5              5       Kurtosis       5.412645
2021-07-14T09:52:03.474637700Z 
2021-07-14T09:52:03.490511400Z                         household_id
2021-07-14T09:52:03.490527400Z -------------------------------------------------------------
2021-07-14T09:52:03.490531400Z       Percentiles      Smallest
2021-07-14T09:52:03.490534700Z  1%        529.5            221
2021-07-14T09:52:03.490537500Z  5%          672            244
2021-07-14T09:52:03.490540600Z 10%          747            254       Obs              20,000
2021-07-14T09:52:03.490544900Z 25%          867            257       Sum of Wgt.      20,000
2021-07-14T09:52:03.490548300Z 
2021-07-14T09:52:03.490551300Z 50%         1001                      Mean           1000.204
2021-07-14T09:52:03.490554400Z                         Largest       Std. Dev.      199.2956
2021-07-14T09:52:03.490557600Z 75%         1135           1725
2021-07-14T09:52:03.505124900Z 90%       1255.5           1748       Variance       39718.75
2021-07-14T09:52:03.505141900Z 95%         1326           1777       Skewness      -.0200479
2021-07-14T09:52:03.505145000Z 99%         1463           1779       Kurtosis       3.050569
2021-07-14T09:52:03.505147300Z 
2021-07-14T09:52:03.505149200Z                        household_size
2021-07-14T09:52:03.505151200Z -------------------------------------------------------------
2021-07-14T09:52:03.505153300Z       Percentiles      Smallest
2021-07-14T09:52:03.505155300Z  1%            0              0
2021-07-14T09:52:03.505157100Z  5%            1              0
2021-07-14T09:52:03.505159000Z 10%            1              0       Obs              20,000
2021-07-14T09:52:03.505161900Z 25%            2              0       Sum of Wgt.      20,000
2021-07-14T09:52:03.505163900Z 
2021-07-14T09:52:03.506265200Z 50%            3                      Mean               2.51
2021-07-14T09:52:03.506274100Z                         Largest       Std. Dev.      1.038968
2021-07-14T09:52:03.506276400Z 75%            3              6
2021-07-14T09:52:03.506279100Z 90%            4              6       Variance       1.079454
2021-07-14T09:52:03.506282300Z 95%            4              6       Skewness       .0467856
2021-07-14T09:52:03.506285400Z 99%            5              6       Kurtosis       2.892019
2021-07-14T09:52:03.506288900Z 
2021-07-14T09:52:03.506292000Z                        care_home_type
2021-07-14T09:52:03.506295100Z -------------------------------------------------------------
2021-07-14T09:52:03.506298300Z no observations
2021-07-14T09:52:03.506301300Z 
2021-07-14T09:52:03.506304300Z                              bmi
2021-07-14T09:52:03.525223500Z -------------------------------------------------------------
2021-07-14T09:52:03.525240100Z       Percentiles      Smallest
2021-07-14T09:52:03.525254200Z  1%            0      -2.233149
2021-07-14T09:52:03.525258300Z  5%            0      -.4963949
2021-07-14T09:52:03.525261900Z 10%     18.74594      -.0563889       Obs              20,000
2021-07-14T09:52:03.525264000Z 25%     26.87796              0       Sum of Wgt.      20,000
2021-07-14T09:52:03.525266200Z 
2021-07-14T09:52:03.525268000Z 50%     34.28632                      Mean           33.24458
2021-07-14T09:52:03.525269900Z                         Largest       Std. Dev.      12.39855
2021-07-14T09:52:03.525271900Z 75%     41.39146       69.34234
2021-07-14T09:52:03.525273800Z 90%     47.45235         71.105       Variance       153.7239
2021-07-14T09:52:03.543512600Z 95%     51.15698       71.29565       Skewness      -.7001088
2021-07-14T09:52:03.543533800Z 99%     58.47578       71.82713       Kurtosis       3.870337
2021-07-14T09:52:03.543537300Z 
2021-07-14T09:52:03.543539900Z                            bp_sys
2021-07-14T09:52:03.543542400Z -------------------------------------------------------------
2021-07-14T09:52:03.543544900Z       Percentiles      Smallest
2021-07-14T09:52:03.543547500Z  1%            0              0
2021-07-14T09:52:03.543549900Z  5%     16.25465              0
2021-07-14T09:52:03.543552300Z 10%     63.95004              0       Obs              20,000
2021-07-14T09:52:03.543555200Z 25%      72.0044              0       Sum of Wgt.      20,000
2021-07-14T09:52:03.543557800Z 
2021-07-14T09:52:03.543560100Z 50%     79.26186                      Mean           75.97325
2021-07-14T09:52:03.559435900Z                         Largest       Std. Dev.      19.94169
2021-07-14T09:52:03.559453500Z 75%     86.18874       115.3623
2021-07-14T09:52:03.559456900Z 90%     92.30562       116.5507       Variance        397.671
2021-07-14T09:52:03.559459700Z 95%     96.14515       116.8672       Skewness      -2.612189
2021-07-14T09:52:03.559462500Z 99%     103.6065       121.9455       Kurtosis       10.77538
2021-07-14T09:52:03.559465200Z 
2021-07-14T09:52:03.559467700Z                            bp_dias
2021-07-14T09:52:03.559470200Z -------------------------------------------------------------
2021-07-14T09:52:03.559473000Z       Percentiles      Smallest
2021-07-14T09:52:03.559475600Z  1%            0              0
2021-07-14T09:52:03.559478100Z  5%     40.82373              0
2021-07-14T09:52:03.560735400Z 10%      104.005              0       Obs              20,000
2021-07-14T09:52:03.560746900Z 25%     112.0418              0       Sum of Wgt.      20,000
2021-07-14T09:52:03.560750700Z 
2021-07-14T09:52:03.560753900Z 50%     119.4191                      Mean           114.0949
2021-07-14T09:52:03.560757300Z                         Largest       Std. Dev.       27.9288
2021-07-14T09:52:03.560768000Z 75%     126.4334        155.472
2021-07-14T09:52:03.560771400Z 90%     132.5331       157.6302       Variance       780.0179
2021-07-14T09:52:03.560774600Z 95%     136.4104       158.3785       Skewness       -3.32111
2021-07-14T09:52:03.560777700Z 99%     143.1974       162.6622       Kurtosis       14.00973
2021-07-14T09:52:03.560780800Z 
2021-07-14T09:52:03.560783700Z                          creatinine
2021-07-14T09:52:03.576677900Z -------------------------------------------------------------
2021-07-14T09:52:03.576689700Z       Percentiles      Smallest
2021-07-14T09:52:03.576692400Z  1%            0              0
2021-07-14T09:52:03.576695200Z  5%        .1818              0
2021-07-14T09:52:03.576698300Z 10%     35.57924              0       Obs              20,000
2021-07-14T09:52:03.576701400Z 25%     47.82613              0       Sum of Wgt.      20,000
2021-07-14T09:52:03.576704900Z 
2021-07-14T09:52:03.576708200Z 50%     58.94308                      Mean           56.91121
2021-07-14T09:52:03.576710400Z                         Largest       Std. Dev.      19.62747
2021-07-14T09:52:03.576712300Z 75%     69.48136       116.3481
2021-07-14T09:52:03.576714100Z 90%     78.66994        120.226       Variance       385.2378
2021-07-14T09:52:03.577179100Z 95%     84.18546       120.9555       Skewness       -.955913
2021-07-14T09:52:03.577186400Z 99%     95.12144       127.6312       Kurtosis       4.612557
2021-07-14T09:52:03.577188500Z 
2021-07-14T09:52:03.577190300Z                        smoking_status
2021-07-14T09:52:03.577192100Z -------------------------------------------------------------
2021-07-14T09:52:03.577194000Z no observations
2021-07-14T09:52:03.577196000Z 
2021-07-14T09:52:03.577197800Z                         diabetes_type
2021-07-14T09:52:03.577199700Z -------------------------------------------------------------
2021-07-14T09:52:03.577201700Z no observations
2021-07-14T09:52:03.577203500Z 
2021-07-14T09:52:03.577205200Z                      diabetes_exeter_os
2021-07-14T09:52:03.577207100Z -------------------------------------------------------------
2021-07-14T09:52:03.577209000Z no observations
2021-07-14T09:52:03.577210900Z 
2021-07-14T09:52:03.577212700Z                        diabetes_exeter
2021-07-14T09:52:03.593884100Z -------------------------------------------------------------
2021-07-14T09:52:03.593906800Z no observations
2021-07-14T09:52:03.593909600Z 
2021-07-14T09:52:03.593911500Z                      hba1c_mmol_per_mol
2021-07-14T09:52:03.593913500Z -------------------------------------------------------------
2021-07-14T09:52:03.593915400Z       Percentiles      Smallest
2021-07-14T09:52:03.593924400Z  1%    -6.060559      -52.46546
2021-07-14T09:52:03.593926400Z  5%            0      -39.27417
2021-07-14T09:52:03.593928200Z 10%     7.067009      -35.16301       Obs              20,000
2021-07-14T09:52:03.593930100Z 25%     24.08367      -34.52777       Sum of Wgt.      20,000
2021-07-14T09:52:03.593932000Z 
2021-07-14T09:52:03.593933800Z 50%     38.53678                      Mean           37.96749
2021-07-14T09:52:03.611842100Z                         Largest       Std. Dev.      21.37873
2021-07-14T09:52:03.611867200Z 75%     52.56763       111.8692
2021-07-14T09:52:03.611872400Z 90%      65.4217       113.2051       Variance       457.0501
2021-07-14T09:52:03.611876100Z 95%     72.60416       118.8079       Skewness      -.0414192
2021-07-14T09:52:03.611879200Z 99%     85.82689       119.6719       Kurtosis       2.728036
2021-07-14T09:52:03.611882300Z 
2021-07-14T09:52:03.611885500Z                       hba1c_percentage
2021-07-14T09:52:03.611888500Z -------------------------------------------------------------
2021-07-14T09:52:03.611891700Z       Percentiles      Smallest
2021-07-14T09:52:03.611894800Z  1%            0      -2.859088
2021-07-14T09:52:03.611897700Z  5%            0      -2.580172
2021-07-14T09:52:03.613155700Z 10%     1.769489      -2.373386       Obs              20,000
2021-07-14T09:52:03.613171300Z 25%     3.378095      -1.991701       Sum of Wgt.      20,000
2021-07-14T09:52:03.613176100Z 
2021-07-14T09:52:03.613179300Z 50%     4.861596                      Mean           4.746715
2021-07-14T09:52:03.613182200Z                         Largest       Std. Dev.      2.238776
2021-07-14T09:52:03.613185000Z 75%     6.262667        12.6872
2021-07-14T09:52:03.613188200Z 90%     7.529487       12.75672       Variance       5.012116
2021-07-14T09:52:03.613191300Z 95%     8.255661       12.86149       Skewness      -.2089098
2021-07-14T09:52:03.613194300Z 99%     9.626567       13.16465       Kurtosis        2.91124
2021-07-14T09:52:03.613197100Z 
2021-07-14T09:52:03.613199800Z                            asthma
2021-07-14T09:52:03.615396100Z -------------------------------------------------------------
2021-07-14T09:52:03.615412300Z       Percentiles      Smallest
2021-07-14T09:52:03.615417100Z  1%            0              0
2021-07-14T09:52:03.615419500Z  5%            0              0
2021-07-14T09:52:03.615421400Z 10%            0              0       Obs               4,000
2021-07-14T09:52:03.615423300Z 25%            0              0       Sum of Wgt.       4,000
2021-07-14T09:52:03.615425300Z 
2021-07-14T09:52:03.615427100Z 50%            0                      Mean              .6835
2021-07-14T09:52:03.615437100Z                         Largest       Std. Dev.      .8961186
2021-07-14T09:52:03.615439400Z 75%            2              2
2021-07-14T09:52:03.615441300Z 90%            2              2       Variance       .8030285
2021-07-14T09:52:03.634511600Z 95%            2              2       Skewness       .6637893
2021-07-14T09:52:03.634525900Z 99%            2              2       Kurtosis       1.574693
2021-07-14T09:52:03.634528600Z 
2021-07-14T09:52:03.634530500Z                          patient_id
2021-07-14T09:52:03.634532300Z -------------------------------------------------------------
2021-07-14T09:52:03.634534400Z       Percentiles      Smallest
2021-07-14T09:52:03.634536300Z  1%       1838.5             11
2021-07-14T09:52:03.634538100Z  5%         9883             22
2021-07-14T09:52:03.634539900Z 10%        19730             23       Obs              20,000
2021-07-14T09:52:03.634541800Z 25%      50436.5             39       Sum of Wgt.      20,000
2021-07-14T09:52:03.634543700Z 
2021-07-14T09:52:03.634545400Z 50%     101141.5                      Mean           100238.3
2021-07-14T09:52:03.636313800Z                         Largest       Std. Dev.      57747.22
2021-07-14T09:52:03.636328600Z 75%     150064.5         199971
2021-07-14T09:52:03.636345100Z 90%     180224.5         199973       Variance       3.33e+09
2021-07-14T09:52:03.636347800Z 95%     189852.5         199976       Skewness      -.0116624
2021-07-14T09:52:03.636349700Z 99%       197950         199983       Kurtosis        1.80768
2021-07-14T09:52:03.636351600Z 
2021-07-14T09:52:03.636353500Z                         diabetes_date
2021-07-14T09:52:03.636355300Z -------------------------------------------------------------
2021-07-14T09:52:03.636357200Z       Percentiles      Smallest
2021-07-14T09:52:03.636359100Z  1%    15jun1970      15jan1970
2021-07-14T09:52:03.636361000Z  5%    15apr1972      15jan1970
2021-07-14T09:52:03.637169500Z 10%    15nov1974      15jan1970       Obs                 998
2021-07-14T09:52:03.637191600Z 25%    15jun1982      15mar1970       Sum of Wgt.         998
2021-07-14T09:52:03.637196100Z 
2021-07-14T09:52:03.637198100Z 50%    30oct1994                      Mean          29nov1994
2021-07-14T09:52:03.637200100Z                         Largest       Std. Dev.      5279.402
2021-07-14T09:52:03.637202000Z 75%    15apr2007      15sep2019
2021-07-14T09:52:03.637203900Z 90%    15dec2014      15nov2019       Variance       2.79e+07
2021-07-14T09:52:03.637205800Z 95%    15jun2017      15dec2019       Skewness       -.000902
2021-07-14T09:52:03.637207900Z 99%    15jul2019      15dec2019       Kurtosis        1.79822
2021-07-14T09:52:03.637209800Z 
2021-07-14T09:52:03.637211600Z                         died_date_ons
2021-07-14T09:52:03.639641500Z -------------------------------------------------------------
2021-07-14T09:52:03.639656100Z       Percentiles      Smallest
2021-07-14T09:52:03.639660500Z  1%    02sep1970      03jan1970
2021-07-14T09:52:03.639663500Z  5%    22apr1972      08jan1970
2021-07-14T09:52:03.639667000Z 10%    24aug1974      15jan1970       Obs               3,918
2021-07-14T09:52:03.639670500Z 25%    31jan1982      16jan1970       Sum of Wgt.       3,918
2021-07-14T09:52:03.639674200Z 
2021-07-14T09:52:03.639676100Z 50%    19aug1994                      Mean          03nov1994
2021-07-14T09:52:03.639678000Z                         Largest       Std. Dev.      5337.915
2021-07-14T09:52:03.639680000Z 75%    24may2007      13jul2020
2021-07-14T09:52:03.639681800Z 90%    12apr2015      23jul2020       Variance       2.85e+07
2021-07-14T09:52:03.639683700Z 95%    24oct2017      25jul2020       Skewness       .0264435
2021-07-14T09:52:03.639685500Z 99%    15jan2020      26jul2020       Kurtosis       1.800442
2021-07-14T09:52:03.639687300Z 
2021-07-14T09:52:03.639689200Z . 
2021-07-14T09:52:03.639691100Z . /* CREATE VARIABLES==========================================================
2021-07-14T09:52:03.639693100Z > =*/
2021-07-14T09:52:03.639695100Z . 
2021-07-14T09:52:03.639696900Z . /* DEMOGRAPHICS */
2021-07-14T09:52:03.639698700Z . 
2021-07-14T09:52:03.639700400Z . * Sex
2021-07-14T09:52:03.639702200Z . gen male = 1 if sex == "M"
2021-07-14T09:52:03.642686200Z (10,181 missing values generated)
2021-07-14T09:52:03.642712400Z 
2021-07-14T09:52:03.642715500Z . replace male = 0 if sex == "F"
2021-07-14T09:52:03.645953500Z (10,181 real changes made)
2021-07-14T09:52:03.645966400Z 
2021-07-14T09:52:03.645969700Z . 
2021-07-14T09:52:03.645972400Z . * Ethnicity
2021-07-14T09:52:03.645975200Z . replace ethnicity = .u if ethnicity == .
2021-07-14T09:52:03.647812200Z (5,000 real changes made, 5,000 to missing)
2021-07-14T09:52:03.647830100Z 
2021-07-14T09:52:03.647833100Z . 
2021-07-14T09:52:03.647835200Z . label define ethnicity  1 "White"                                       ///
2021-07-14T09:52:03.647837500Z >                                                 2 "Mixed"                    
2021-07-14T09:52:03.647839900Z >                    ///
2021-07-14T09:52:03.647842000Z >                                                 3 "Asian or Asian British"   
2021-07-14T09:52:03.647844200Z >    ///
2021-07-14T09:52:03.647846100Z >                                                 4 "Black"                    
2021-07-14T09:52:03.647854000Z >                    ///
2021-07-14T09:52:03.647856200Z >                                                 5 "Other"                    
2021-07-14T09:52:03.647858200Z >                    ///
2021-07-14T09:52:03.647879500Z >                                                 .u "Unknown"
2021-07-14T09:52:03.647885800Z 
2021-07-14T09:52:03.647888100Z . 
2021-07-14T09:52:03.647890100Z . label values ethnicity ethnicity
2021-07-14T09:52:03.647990900Z 
2021-07-14T09:52:03.647999600Z . 
2021-07-14T09:52:03.648002100Z . * STP
2021-07-14T09:52:03.648004100Z . rename stp stp_old
2021-07-14T09:52:03.648212900Z 
2021-07-14T09:52:03.648221400Z . bysort stp_old: gen stp = 1 if _n==1
2021-07-14T09:52:03.658648600Z (19,990 missing values generated)
2021-07-14T09:52:03.658669800Z 
2021-07-14T09:52:03.658674600Z . replace stp = sum(stp)
2021-07-14T09:52:03.659860100Z (19,999 real changes made)
2021-07-14T09:52:03.659869600Z 
2021-07-14T09:52:03.659872300Z . drop stp_old
2021-07-14T09:52:03.660319500Z 
2021-07-14T09:52:03.660326800Z . 
2021-07-14T09:52:03.660329100Z . /*  IMD  */
2021-07-14T09:52:03.660331100Z . * Group into 5 groups
2021-07-14T09:52:03.660332900Z . rename imd imd_o
2021-07-14T09:52:03.660335000Z 
2021-07-14T09:52:03.660417000Z . egen imd = cut(imd_o), group(5) icodes
2021-07-14T09:52:03.685410000Z 
2021-07-14T09:52:03.685424000Z . 
2021-07-14T09:52:03.685426700Z . * add one to create groups 1 - 5
2021-07-14T09:52:03.685428900Z . replace imd = imd + 1
2021-07-14T09:52:03.686411000Z (20,000 real changes made)
2021-07-14T09:52:03.686420200Z 
2021-07-14T09:52:03.686422800Z . 
2021-07-14T09:52:03.686424800Z . * - 1 is missing, should be excluded from population
2021-07-14T09:52:03.686426900Z . replace imd = .u if imd_o == -1
2021-07-14T09:52:03.687921100Z (0 real changes made)
2021-07-14T09:52:03.687928400Z 
2021-07-14T09:52:03.687930600Z . drop imd_o
2021-07-14T09:52:03.688486100Z 
2021-07-14T09:52:03.688492800Z . 
2021-07-14T09:52:03.688495200Z . * Reverse the order (so high is more deprived)
2021-07-14T09:52:03.688497200Z . recode imd 5 = 1 4 = 2 3 = 3 2 = 4 1 = 5 .u = .u
2021-07-14T09:52:03.717119100Z (imd: 20000 changes made)
2021-07-14T09:52:03.718938300Z 
2021-07-14T09:52:03.718949400Z . 
2021-07-14T09:52:03.718953600Z . label define imd 1 "1 least deprived" 2 "2" 3 "3" 4 "4" 5 "5 most deprived" .
2021-07-14T09:52:03.718967100Z > u "Unknown"
2021-07-14T09:52:03.718971100Z 
2021-07-14T09:52:03.718973900Z . label values imd imd
2021-07-14T09:52:03.719219300Z 
2021-07-14T09:52:03.719229300Z . 
2021-07-14T09:52:03.719233500Z . /*  Age variables  */
2021-07-14T09:52:03.719236800Z . 
2021-07-14T09:52:03.719239700Z . * Create categorised age
2021-07-14T09:52:03.719244700Z . recode age 18/29.9999 = 1 ///
2021-07-14T09:52:03.719248000Z >                    30/39.9999 = 2 ///
2021-07-14T09:52:03.719251300Z >            40/49.9999 = 3 ///
2021-07-14T09:52:03.719254500Z >                    50/59.9999 = 4 ///
2021-07-14T09:52:03.719257800Z >                60/69.9999 = 5 ///
2021-07-14T09:52:03.719261100Z >                    70/79.9999 = 6 ///
2021-07-14T09:52:03.719265800Z >                    80/max = 7, gen(agegroup)
2021-07-14T09:52:03.777590200Z (15751 differences between age and agegroup)
2021-07-14T09:52:03.782750500Z 
2021-07-14T09:52:03.782766300Z . 
2021-07-14T09:52:03.782770500Z . label define agegroup   1 "18-<30" ///
2021-07-14T09:52:03.782774400Z >                                                 2 "30-<40" ///
2021-07-14T09:52:03.782777700Z >                                                 3 "40-<50" ///
2021-07-14T09:52:03.782781100Z >                                                 4 "50-<60" ///
2021-07-14T09:52:03.782784300Z >                                                 5 "60-<70" ///
2021-07-14T09:52:03.782787400Z >                                                 6 "70-<80" ///
2021-07-14T09:52:03.782790600Z >                                                 7 "80+"
2021-07-14T09:52:03.782793900Z 
2021-07-14T09:52:03.782796600Z . 
2021-07-14T09:52:03.782799600Z . label values agegroup agegroup
2021-07-14T09:52:03.782922500Z 
2021-07-14T09:52:03.782931900Z . 
2021-07-14T09:52:03.782935500Z . * Create binary age (for age stratification)
2021-07-14T09:52:03.782938900Z . recode age min/65.999999999 = 0 ///
2021-07-14T09:52:03.782942000Z >            66/max = 1, gen(age66)
2021-07-14T09:52:03.806749900Z (19793 differences between age and age66)
2021-07-14T09:52:03.814791900Z 
2021-07-14T09:52:03.814809400Z . 
2021-07-14T09:52:03.814813600Z . * Check there are no missing ages
2021-07-14T09:52:03.814817300Z . assert age < .
2021-07-14T09:52:03.816495500Z 
2021-07-14T09:52:03.816525200Z . assert agegroup < .
2021-07-14T09:52:03.817742500Z 
2021-07-14T09:52:03.817751600Z . assert age66 < .
2021-07-14T09:52:03.818777900Z 
2021-07-14T09:52:03.818799100Z . 
2021-07-14T09:52:03.818806400Z . 
2021-07-14T09:52:03.818809900Z . /* APPLY HH level INCLUSION/EXCLUIONS========================================
2021-07-14T09:52:03.818813300Z > ==========*/
2021-07-14T09:52:03.818816600Z . *tab care_home_type household_size
2021-07-14T09:52:03.818819800Z . drop if care_home_type!="U"
2021-07-14T09:52:03.825065500Z (599 observations deleted)
2021-07-14T09:52:03.825085800Z 
2021-07-14T09:52:03.825088800Z . 
2021-07-14T09:52:03.825090800Z . count
2021-07-14T09:52:03.825092700Z   19,401
2021-07-14T09:52:03.825094600Z 
2021-07-14T09:52:03.825096500Z . noi di "DROP if HH ID==0"
2021-07-14T09:52:03.825098500Z DROP if HH ID==0
2021-07-14T09:52:03.825100500Z 
2021-07-14T09:52:03.825102300Z . count if household_id==0
2021-07-14T09:52:03.826551700Z   0
2021-07-14T09:52:03.826565200Z 
2021-07-14T09:52:03.826569100Z . drop if household_id==0
2021-07-14T09:52:03.829185400Z (0 observations deleted)
2021-07-14T09:52:03.829204900Z 
2021-07-14T09:52:03.829209500Z . count
2021-07-14T09:52:03.829212700Z   19,401
2021-07-14T09:52:03.829215500Z 
2021-07-14T09:52:03.829292500Z . 
2021-07-14T09:52:03.829301400Z . noi di "DROP HH>=10 persons:"
2021-07-14T09:52:03.829305500Z DROP HH>=10 persons:
2021-07-14T09:52:03.829309000Z 
2021-07-14T09:52:03.829312100Z . sum household_size, d
2021-07-14T09:52:03.843108300Z 
2021-07-14T09:52:03.843127600Z                        household_size
2021-07-14T09:52:03.843130600Z -------------------------------------------------------------
2021-07-14T09:52:03.843132700Z       Percentiles      Smallest
2021-07-14T09:52:03.843134700Z  1%            0              0
2021-07-14T09:52:03.843136700Z  5%            1              0
2021-07-14T09:52:03.843138700Z 10%            1              0       Obs              19,401
2021-07-14T09:52:03.843141100Z 25%            2              0       Sum of Wgt.      19,401
2021-07-14T09:52:03.843143000Z 
2021-07-14T09:52:03.843144900Z 50%            3                      Mean           2.509871
2021-07-14T09:52:03.843146900Z                         Largest       Std. Dev.      1.039289
2021-07-14T09:52:03.843148800Z 75%            3              6
2021-07-14T09:52:03.843150700Z 90%            4              6       Variance       1.080122
2021-07-14T09:52:03.843152700Z 95%            4              6       Skewness       .0440995
2021-07-14T09:52:03.843164500Z 99%            5              6       Kurtosis       2.895154
2021-07-14T09:52:03.843166800Z 
2021-07-14T09:52:03.843168800Z . drop if household_size>=10
2021-07-14T09:52:03.844767100Z (0 observations deleted)
2021-07-14T09:52:03.844781500Z 
2021-07-14T09:52:03.844786900Z . count
2021-07-14T09:52:03.844790000Z   19,401
2021-07-14T09:52:03.844793200Z 
2021-07-14T09:52:03.844796000Z . 
2021-07-14T09:52:03.844798700Z . noi di "DROP MISSING GENDER:"
2021-07-14T09:52:03.844801600Z DROP MISSING GENDER:
2021-07-14T09:52:03.844804200Z 
2021-07-14T09:52:03.844806500Z . recode male .=9
2021-07-14T09:52:03.854885600Z (male: 0 changes made)
2021-07-14T09:52:03.855963300Z 
2021-07-14T09:52:03.855973900Z . recode male .u=9
2021-07-14T09:52:03.867656300Z (male: 0 changes made)
2021-07-14T09:52:03.869309800Z 
2021-07-14T09:52:03.869320500Z . bysort household_id: egen male_drop=max(male)
2021-07-14T09:52:03.921269600Z 
2021-07-14T09:52:03.921296000Z . drop if male_drop==9
2021-07-14T09:52:03.922210200Z (0 observations deleted)
2021-07-14T09:52:03.922221200Z 
2021-07-14T09:52:03.922225100Z . 
2021-07-14T09:52:03.922228400Z . noi di "DROP AGE MISSING:"
2021-07-14T09:52:03.922231900Z DROP AGE MISSING:
2021-07-14T09:52:03.922235200Z 
2021-07-14T09:52:03.922238500Z . recode age .=9
2021-07-14T09:52:03.932284500Z (age: 0 changes made)
2021-07-14T09:52:03.933952000Z 
2021-07-14T09:52:03.933964000Z . recode age .u=9
2021-07-14T09:52:03.942329400Z (age: 0 changes made)
2021-07-14T09:52:03.943129800Z 
2021-07-14T09:52:03.943140000Z . bysort household_id: egen age_drop=max(age)
2021-07-14T09:52:03.977740500Z 
2021-07-14T09:52:03.977758400Z . drop if age_drop==9
2021-07-14T09:52:03.978620700Z (0 observations deleted)
2021-07-14T09:52:03.978632800Z 
2021-07-14T09:52:03.978636000Z . 
2021-07-14T09:52:03.978638000Z . noi di "DROP IMD MISSING"
2021-07-14T09:52:03.978640100Z DROP IMD MISSING
2021-07-14T09:52:03.978642000Z 
2021-07-14T09:52:03.978644000Z . recode imd .=9
2021-07-14T09:52:03.986524600Z (imd: 0 changes made)
2021-07-14T09:52:03.988640500Z 
2021-07-14T09:52:03.988652000Z . recode imd .u=9
2021-07-14T09:52:03.998096100Z (imd: 0 changes made)
2021-07-14T09:52:04.000276300Z 
2021-07-14T09:52:04.000292400Z . bysort household_id: egen imd_drop=max(imd)
2021-07-14T09:52:04.042283700Z 
2021-07-14T09:52:04.042301700Z . drop if imd_drop==9
2021-07-14T09:52:04.051784200Z (0 observations deleted)
2021-07-14T09:52:04.051803000Z 
2021-07-14T09:52:04.051807600Z . 
2021-07-14T09:52:04.051811000Z . **************************** HOUSEHOLD VARS**********************************
2021-07-14T09:52:04.051813900Z > *********
2021-07-14T09:52:04.051817000Z . 
2021-07-14T09:52:04.051820300Z . *No kids/kids under 12/up to 18
2021-07-14T09:52:04.051823500Z . *Identify kids under 12, or kids under 18
2021-07-14T09:52:04.051826500Z . gen nokids=1 if age<12
2021-07-14T09:52:04.051829500Z (16,544 missing values generated)
2021-07-14T09:52:04.051832400Z 
2021-07-14T09:52:04.051835300Z . recode nokids .=2 if age<18
2021-07-14T09:52:04.059905900Z (nokids: 1277 changes made)
2021-07-14T09:52:04.061060800Z 
2021-07-14T09:52:04.061070500Z . bysort household_id: egen min_kids=min(nokids)
2021-07-14T09:52:04.085639700Z (684 missing values generated)
2021-07-14T09:52:04.089208700Z 
2021-07-14T09:52:04.089219700Z . gen kids_cat3=min_kids
2021-07-14T09:52:04.089931600Z (684 missing values generated)
2021-07-14T09:52:04.089943300Z 
2021-07-14T09:52:04.089947600Z . recode kids_cat3 .=0
2021-07-14T09:52:04.096019400Z (kids_cat3: 684 changes made)
2021-07-14T09:52:04.096995000Z 
2021-07-14T09:52:04.097006600Z . lab define kids_cat3  0 "No kids" 1 "Kids under 12" 2 "Kids under 18"
2021-07-14T09:52:04.097011200Z 
2021-07-14T09:52:04.097014500Z . lab val kids_cat3 kids_cat3
2021-07-14T09:52:04.097189800Z 
2021-07-14T09:52:04.097200300Z . drop min_kids
2021-07-14T09:52:04.097823700Z 
2021-07-14T09:52:04.097840300Z . 
2021-07-14T09:52:04.097844500Z . *Dose-response exposure
2021-07-14T09:52:04.097848200Z . recode nokids 2=.
2021-07-14T09:52:04.107988400Z (nokids: 1277 changes made)
2021-07-14T09:52:04.110489000Z 
2021-07-14T09:52:04.110520400Z . bysort household_id: egen number_kids=count(nokids)
2021-07-14T09:52:04.126820500Z 
2021-07-14T09:52:04.126836900Z . gen gp_number_kids=number_kids
2021-07-14T09:52:04.127605300Z 
2021-07-14T09:52:04.127620100Z . recode gp_number_kids 3/max=3
2021-07-14T09:52:04.140607200Z (gp_number_kids: 10669 changes made)
2021-07-14T09:52:04.141580000Z 
2021-07-14T09:52:04.141591600Z . recode gp_number_kids 1=2 2=3 3=4
2021-07-14T09:52:04.156945800Z (gp_number_kids: 18157 changes made)
2021-07-14T09:52:04.158552300Z 
2021-07-14T09:52:04.158573900Z . replace gp_number_kids=0 if kids_cat3==0
2021-07-14T09:52:04.159637500Z (0 real changes made)
2021-07-14T09:52:04.159648400Z 
2021-07-14T09:52:04.159651800Z . replace gp_number_kids=1 if kids_cat3==2
2021-07-14T09:52:04.160717900Z (560 real changes made)
2021-07-14T09:52:04.160730100Z 
2021-07-14T09:52:04.160734100Z . 
2021-07-14T09:52:04.160737300Z . lab var gp_number_kids "Number kids under 12 years in hh"
2021-07-14T09:52:04.160741100Z 
2021-07-14T09:52:04.160744100Z . drop nokids
2021-07-14T09:52:04.161678500Z 
2021-07-14T09:52:04.161692400Z . lab define   gp_number_kids 0 none  1 "only >12 years" ///
2021-07-14T09:52:04.161696600Z > 2 "1 child <12" ///
2021-07-14T09:52:04.161699500Z > 3 "2 children <12" ///
2021-07-14T09:52:04.161702300Z > 4 "3+ children <12"
2021-07-14T09:52:04.161705000Z 
2021-07-14T09:52:04.161707700Z . lab val gp_number_kids gp_number_kids
2021-07-14T09:52:04.161921200Z 
2021-07-14T09:52:04.161929000Z . 
2021-07-14T09:52:04.161931200Z . tab kids_cat3 gp_number_kids, miss
2021-07-14T09:52:04.164481700Z 
2021-07-14T09:52:04.164506900Z               |      Number kids under 12 years in hh
2021-07-14T09:52:04.164510500Z     kids_cat3 |      none  only >12   1 child <  2 childre |     Total
2021-07-14T09:52:04.164512900Z --------------+--------------------------------------------+----------
2021-07-14T09:52:04.164514900Z       No kids |       684          0          0          0 |       684 
2021-07-14T09:52:04.164516900Z Kids under 12 |         0          0      1,567      2,277 |    18,157 
2021-07-14T09:52:04.164518700Z Kids under 18 |         0        560          0          0 |       560 
2021-07-14T09:52:04.164520600Z --------------+--------------------------------------------+----------
2021-07-14T09:52:04.164522600Z         Total |       684        560      1,567      2,277 |    19,401 
2021-07-14T09:52:04.164524500Z 
2021-07-14T09:52:04.164526300Z 
2021-07-14T09:52:04.164528100Z               |   Number
2021-07-14T09:52:04.164529900Z               | kids under
2021-07-14T09:52:04.164531600Z               |  12 years
2021-07-14T09:52:04.164533400Z               |   in hh
2021-07-14T09:52:04.164535300Z     kids_cat3 | 3+ childr |     Total
2021-07-14T09:52:04.164537300Z --------------+-----------+----------
2021-07-14T09:52:04.164539600Z       No kids |         0 |       684 
2021-07-14T09:52:04.164541500Z Kids under 12 |    14,313 |    18,157 
2021-07-14T09:52:04.164543300Z Kids under 18 |         0 |       560 
2021-07-14T09:52:04.164545200Z --------------+-----------+----------
2021-07-14T09:52:04.164554200Z         Total |    14,313 |    19,401 
2021-07-14T09:52:04.164556100Z 
2021-07-14T09:52:04.164558000Z . 
2021-07-14T09:52:04.164559900Z . /* DROP ALL KIDS, AS HH COMPOSITION VARS ARE NOW MADE */
2021-07-14T09:52:04.164561900Z . drop if age<18
2021-07-14T09:52:04.170087800Z (4,134 observations deleted)
2021-07-14T09:52:04.170113400Z 
2021-07-14T09:52:04.170117800Z . 
2021-07-14T09:52:04.170121200Z . *Total number adults in household (to check hh size)
2021-07-14T09:52:04.170125200Z . bysort household_id: gen tot_adults_hh=_N
2021-07-14T09:52:04.173282000Z 
2021-07-14T09:52:04.173318800Z . recode tot_adults_hh 3/max=3
2021-07-14T09:52:04.183910100Z (tot_adults_hh: 14716 changes made)
2021-07-14T09:52:04.184706300Z 
2021-07-14T09:52:04.184716400Z . 
2021-07-14T09:52:04.184720500Z . 
2021-07-14T09:52:04.184723900Z . /* SET FU DATES==============================================================
2021-07-14T09:52:04.184726200Z > =*/
2021-07-14T09:52:04.184728400Z . * Censoring dates for each outcome (largely, last date outcome data available
2021-07-14T09:52:04.184730500Z > )
2021-07-14T09:52:04.184732500Z . *****NEEDS UPDATING WHEN INFO AVAILABLE*******************
2021-07-14T09:52:04.184734400Z . global tpp_infec_censor                 = "01/02/2020"
2021-07-14T09:52:04.184736500Z 
2021-07-14T09:52:04.184738300Z . 
2021-07-14T09:52:04.184740200Z . *Start dates
2021-07-14T09:52:04.184742100Z . global indexdate                            = "01/02/2019"
2021-07-14T09:52:04.184744200Z 
2021-07-14T09:52:04.184746100Z . 
2021-07-14T09:52:04.184747900Z . 
2021-07-14T09:52:04.184749700Z . * Some names too long for loops below, shorten
2021-07-14T09:52:04.184751700Z . rename permanent_immunodeficiency_date  perm_immunodef_date
2021-07-14T09:52:04.184822500Z 
2021-07-14T09:52:04.184833500Z . rename temporary_immunodeficiency_date  temp_immunodef_date
2021-07-14T09:52:04.184971000Z 
2021-07-14T09:52:04.184980600Z . rename bmi_date_measured_date                   bmi_measured_date
2021-07-14T09:52:04.184984600Z 
2021-07-14T09:52:04.184987700Z . rename dereg_date_date                                          dereg_date
2021-07-14T09:52:04.185180100Z 
2021-07-14T09:52:04.185190500Z . 
2021-07-14T09:52:04.185194100Z . /* CREATE BINARY VARIABLES===================================================
2021-07-14T09:52:04.185196500Z > =*/
2021-07-14T09:52:04.185198600Z . *  Make indicator variables for all conditions where relevant
2021-07-14T09:52:04.185206300Z . 
2021-07-14T09:52:04.185208200Z . foreach var of varlist  chronic_respiratory_disease ///
2021-07-14T09:52:04.185210200Z >                                                 chronic_cardiac_disease  ///
2021-07-14T09:52:04.185212200Z >                                                 diabetes_date  ///
2021-07-14T09:52:04.185214200Z >                                                 cancer_haem  ///
2021-07-14T09:52:04.185216100Z >                                                 cancer_nonhaem  ///
2021-07-14T09:52:04.185218100Z >                                                 perm_immunodef  ///
2021-07-14T09:52:04.185220600Z >                                                 temp_immunodef  ///
2021-07-14T09:52:04.185222600Z >                                                 dialysis                     
2021-07-14T09:52:04.185224800Z >                    ///
2021-07-14T09:52:04.185226700Z >                                                 kidney_transplant            
2021-07-14T09:52:04.185228700Z >            ///
2021-07-14T09:52:04.185230600Z >                                                 other_transplant             
2021-07-14T09:52:04.185233500Z >            ///                     ///
2021-07-14T09:52:04.185235400Z >                                                 asplenia                     
2021-07-14T09:52:04.185237600Z >    ///
2021-07-14T09:52:04.185239500Z >                                                 chronic_liver_disease  ///
2021-07-14T09:52:04.185241600Z >                                                 other_neuro  ///
2021-07-14T09:52:04.185243600Z >                                                 stroke_dementia              
2021-07-14T09:52:04.185245600Z >            ///
2021-07-14T09:52:04.185247500Z >                                                 esrf  ///
2021-07-14T09:52:04.185249400Z >                                                 hypertension  ///
2021-07-14T09:52:04.185251400Z >                                                 ra_sle_psoriasis  ///
2021-07-14T09:52:04.185253500Z >                                                 bmi_measured_date   ///
2021-07-14T09:52:04.185255500Z >                                                 bp_sys_date_measured   ///
2021-07-14T09:52:04.185257600Z >                                                 bp_dias_date_measured   ///
2021-07-14T09:52:04.185259600Z >                                                 creatinine_date  ///
2021-07-14T09:52:04.185261600Z >                                                 smoking_status_date ///
2021-07-14T09:52:04.185263600Z >                                                 {
2021-07-14T09:52:04.185265500Z   2. 
2021-07-14T09:52:04.185267300Z .         /* date ranges are applied in python, so presence of date indicates p
2021-07-14T09:52:04.185271400Z > resence of
2021-07-14T09:52:04.185273900Z >           disease in the correct time frame */
2021-07-14T09:52:04.185276000Z .         local newvar =  substr("`var'", 1, length("`var'") - 5)
2021-07-14T09:52:04.185278300Z   3.         gen `newvar' = (`var'!=. )
2021-07-14T09:52:04.185280300Z   4.         order `newvar', after(`var')
2021-07-14T09:52:04.185282200Z   5. 
2021-07-14T09:52:04.185284000Z . }
2021-07-14T09:52:04.246863000Z 
2021-07-14T09:52:04.246878500Z . 
2021-07-14T09:52:04.246881100Z . 
2021-07-14T09:52:04.246883000Z . 
2021-07-14T09:52:04.246884900Z . 
2021-07-14T09:52:04.246886700Z . /*  Body Mass Index  */
2021-07-14T09:52:04.246888800Z . * NB: watch for missingness
2021-07-14T09:52:04.246890800Z . 
2021-07-14T09:52:04.246892600Z . * Recode strange values
2021-07-14T09:52:04.246894600Z . replace bmi = . if bmi == 0
2021-07-14T09:52:04.247866000Z (775 real changes made, 775 to missing)
2021-07-14T09:52:04.247875200Z 
2021-07-14T09:52:04.247878000Z . replace bmi = . if !inrange(bmi, 15, 50)
2021-07-14T09:52:04.249007300Z (1,279 real changes made, 1,279 to missing)
2021-07-14T09:52:04.249018100Z 
2021-07-14T09:52:04.249022500Z . 
2021-07-14T09:52:04.249043500Z . * Restrict to within 10 years of index and aged > 16
2021-07-14T09:52:04.249050100Z . gen bmi_time = (date("$indexdate", "DMY") - bmi_measured_date)/365.25
2021-07-14T09:52:04.257824000Z (775 missing values generated)
2021-07-14T09:52:04.257837300Z 
2021-07-14T09:52:04.257839900Z . gen bmi_age = age - bmi_time
2021-07-14T09:52:04.259266300Z (775 missing values generated)
2021-07-14T09:52:04.259278400Z 
2021-07-14T09:52:04.259281300Z . 
2021-07-14T09:52:04.259283300Z . replace bmi = . if bmi_age < 16
2021-07-14T09:52:04.261072800Z (4,816 real changes made, 4,816 to missing)
2021-07-14T09:52:04.261084500Z 
2021-07-14T09:52:04.261088200Z . replace bmi = . if bmi_time > 10 & bmi_time != .
2021-07-14T09:52:04.264317900Z (5,355 real changes made, 5,355 to missing)
2021-07-14T09:52:04.264332200Z 
2021-07-14T09:52:04.264336000Z . 
2021-07-14T09:52:04.264339400Z . * Set to missing if no date, and vice versa
2021-07-14T09:52:04.264342800Z . replace bmi = . if bmi_measured_date == .
2021-07-14T09:52:04.265455400Z (0 real changes made)
2021-07-14T09:52:04.265465300Z 
2021-07-14T09:52:04.265469100Z . replace bmi_measured_date = . if bmi == .
2021-07-14T09:52:04.267940700Z (11,450 real changes made, 11,450 to missing)
2021-07-14T09:52:04.267958100Z 
2021-07-14T09:52:04.267961800Z . replace bmi_measured = . if bmi == .
2021-07-14T09:52:04.269991600Z (12,225 real changes made, 12,225 to missing)
2021-07-14T09:52:04.270001800Z 
2021-07-14T09:52:04.270005800Z . 
2021-07-14T09:52:04.270009100Z . gen     bmicat = .
2021-07-14T09:52:04.270405300Z (15,267 missing values generated)
2021-07-14T09:52:04.270413600Z 
2021-07-14T09:52:04.270416100Z . recode  bmicat . = 1 if bmi < 18.5
2021-07-14T09:52:04.279544800Z (bmicat: 85 changes made)
2021-07-14T09:52:04.280666500Z 
2021-07-14T09:52:04.280675800Z . recode  bmicat . = 2 if bmi < 25
2021-07-14T09:52:04.291472900Z (bmicat: 370 changes made)
2021-07-14T09:52:04.293375200Z 
2021-07-14T09:52:04.293391700Z . recode  bmicat . = 3 if bmi < 30
2021-07-14T09:52:04.304963700Z (bmicat: 497 changes made)
2021-07-14T09:52:04.307143200Z 
2021-07-14T09:52:04.307161000Z . recode  bmicat . = 4 if bmi < 35
2021-07-14T09:52:04.320007600Z (bmicat: 620 changes made)
2021-07-14T09:52:04.321198800Z 
2021-07-14T09:52:04.321211700Z . recode  bmicat . = 5 if bmi < 40
2021-07-14T09:52:04.334641800Z (bmicat: 636 changes made)
2021-07-14T09:52:04.335576900Z 
2021-07-14T09:52:04.335585700Z . recode  bmicat . = 6 if bmi < .
2021-07-14T09:52:04.343784200Z (bmicat: 834 changes made)
2021-07-14T09:52:04.344763400Z 
2021-07-14T09:52:04.344773900Z . replace bmicat = .u if bmi >= .
2021-07-14T09:52:04.346929300Z (12,225 real changes made, 12,225 to missing)
2021-07-14T09:52:04.346940500Z 
2021-07-14T09:52:04.346944600Z . 
2021-07-14T09:52:04.346947700Z . label define bmicat 1 "Underweight (<18.5)"     ///
2021-07-14T09:52:04.346951600Z >                                         2 "Normal (18.5-24.9)"          ///
2021-07-14T09:52:04.346955200Z >                                         3 "Overweight (25-29.9)"        ///
2021-07-14T09:52:04.346958800Z >                                         4 "Obese I (30-34.9)"           ///
2021-07-14T09:52:04.346962200Z >                                         5 "Obese II (35-39.9)"          ///
2021-07-14T09:52:04.346965300Z >                                         6 "Obese III (40+)"                  
2021-07-14T09:52:04.346968700Z >    ///
2021-07-14T09:52:04.346971300Z >                                         .u "Unknown (.u)"
2021-07-14T09:52:04.347045400Z 
2021-07-14T09:52:04.347053700Z . 
2021-07-14T09:52:04.347057700Z . label values bmicat bmicat
2021-07-14T09:52:04.347177600Z 
2021-07-14T09:52:04.347195400Z . 
2021-07-14T09:52:04.347199300Z . * Create less  granular categorisation
2021-07-14T09:52:04.347202300Z . recode bmicat 1/3 .u = 1 4 = 2 5 = 3 6 = 4, gen(obese4cat)
2021-07-14T09:52:04.368638000Z (15182 differences between bmicat and obese4cat)
2021-07-14T09:52:04.379270000Z 
2021-07-14T09:52:04.379291700Z . 
2021-07-14T09:52:04.379296000Z . label define obese4cat  1 "No record of obesity"        ///
2021-07-14T09:52:04.379299700Z >                                                 2 "Obese I (30-34.9)"        
2021-07-14T09:52:04.379303300Z >    ///
2021-07-14T09:52:04.379306300Z >                                                 3 "Obese II (35-39.9)"       
2021-07-14T09:52:04.379310000Z >    ///
2021-07-14T09:52:04.379313000Z >                                                 4 "Obese III (40+)"
2021-07-14T09:52:04.379316300Z 
2021-07-14T09:52:04.379319200Z . 
2021-07-14T09:52:04.379322300Z . label values obese4cat obese4cat
2021-07-14T09:52:04.379487900Z 
2021-07-14T09:52:04.379500700Z . order obese4cat, after(bmicat)
2021-07-14T09:52:04.379951600Z 
2021-07-14T09:52:04.379963700Z . 
2021-07-14T09:52:04.379994700Z . 
2021-07-14T09:52:04.379998600Z . /*  Smoking  */
2021-07-14T09:52:04.380001800Z . 
2021-07-14T09:52:04.380004700Z . * Smoking
2021-07-14T09:52:04.380007800Z . label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Unknown (.u)"
2021-07-14T09:52:04.380011400Z 
2021-07-14T09:52:04.380014500Z . 
2021-07-14T09:52:04.380017500Z . gen     smoke = 1  if smoking_status == "N"
2021-07-14T09:52:04.382336000Z (14,654 missing values generated)
2021-07-14T09:52:04.382352400Z 
2021-07-14T09:52:04.382356300Z . replace smoke = 2  if smoking_status == "E"
2021-07-14T09:52:04.384378900Z (314 real changes made)
2021-07-14T09:52:04.384389700Z 
2021-07-14T09:52:04.384392200Z . replace smoke = 3  if smoking_status == "S"
2021-07-14T09:52:04.386370800Z (1,790 real changes made)
2021-07-14T09:52:04.386383200Z 
2021-07-14T09:52:04.386387400Z . replace smoke = .u if smoking_status == "M"
2021-07-14T09:52:04.387842600Z (312 real changes made, 312 to missing)
2021-07-14T09:52:04.387852900Z 
2021-07-14T09:52:04.387856400Z . replace smoke = .u if smoking_status == ""
2021-07-14T09:52:04.389877900Z (12,238 real changes made, 12,238 to missing)
2021-07-14T09:52:04.389889100Z 
2021-07-14T09:52:04.389892900Z . 
2021-07-14T09:52:04.389895900Z . label values smoke smoke
2021-07-14T09:52:04.390010900Z 
2021-07-14T09:52:04.390018500Z . drop smoking_status
2021-07-14T09:52:04.390616500Z 
2021-07-14T09:52:04.390626700Z . 
2021-07-14T09:52:04.390630600Z . * Create non-missing 3-category variable for current smoking
2021-07-14T09:52:04.390633700Z . * Assumes missing smoking is never smoking
2021-07-14T09:52:04.390636600Z . recode smoke .u = 1, gen(smoke_nomiss)
2021-07-14T09:52:04.398856200Z (12550 differences between smoke and smoke_nomiss)
2021-07-14T09:52:04.402703400Z 
2021-07-14T09:52:04.402720700Z . order smoke_nomiss, after(smoke)
2021-07-14T09:52:04.403201300Z 
2021-07-14T09:52:04.403214900Z . label values smoke_nomiss smoke
2021-07-14T09:52:04.403350000Z 
2021-07-14T09:52:04.403357400Z . 
2021-07-14T09:52:04.403359700Z . /* CLINICAL COMORBIDITIES */
2021-07-14T09:52:04.403361800Z . 
2021-07-14T09:52:04.403363600Z . /*  Cancer */
2021-07-14T09:52:04.403365500Z . label define cancer 1 "Never" 2 "Last year" 3 "2-5 years ago" 4 "5+ years"
2021-07-14T09:52:04.403476700Z 
2021-07-14T09:52:04.403485500Z . 
2021-07-14T09:52:04.403489300Z . * Haematological malignancies
2021-07-14T09:52:04.403492900Z . gen     cancer_haem_cat = 4 if inrange(cancer_haem_date, d(1/1/1900), d(1/2/2
2021-07-14T09:52:04.403495800Z > 015))
2021-07-14T09:52:04.405091800Z (12,443 missing values generated)
2021-07-14T09:52:04.405102500Z 
2021-07-14T09:52:04.405105700Z . replace cancer_haem_cat = 3 if inrange(cancer_haem_date, d(1/2/2015), d(1/2/2
2021-07-14T09:52:04.405108500Z > 019))
2021-07-14T09:52:04.406534000Z (248 real changes made)
2021-07-14T09:52:04.406552600Z 
2021-07-14T09:52:04.406555500Z . replace cancer_haem_cat = 2 if inrange(cancer_haem_date, d(1/2/2019), d(1/2/2
2021-07-14T09:52:04.406558200Z > 020))
2021-07-14T09:52:04.407643500Z (0 real changes made)
2021-07-14T09:52:04.407652600Z 
2021-07-14T09:52:04.407656300Z . recode  cancer_haem_cat . = 1
2021-07-14T09:52:04.417840000Z (cancer_haem_cat: 12195 changes made)
2021-07-14T09:52:04.419330500Z 
2021-07-14T09:52:04.419342700Z . label values cancer_haem_cat cancer
2021-07-14T09:52:04.419453500Z 
2021-07-14T09:52:04.419476100Z . 
2021-07-14T09:52:04.419483100Z . 
2021-07-14T09:52:04.419513700Z . * All other cancers
2021-07-14T09:52:04.419519000Z . gen     cancer_exhaem_cat = 4 if inrange(cancer_nonhaem_date,  d(1/1/1900), d
2021-07-14T09:52:04.419522700Z > (1/2/2015))
2021-07-14T09:52:04.421178100Z (12,428 missing values generated)
2021-07-14T09:52:04.421196000Z 
2021-07-14T09:52:04.421198400Z . replace cancer_exhaem_cat = 3 if inrange(cancer_nonhaem_date,  d(1/2/2015), d
2021-07-14T09:52:04.421200500Z > (1/2/2019))
2021-07-14T09:52:04.422806600Z (221 real changes made)
2021-07-14T09:52:04.422817800Z 
2021-07-14T09:52:04.422821100Z . replace cancer_exhaem_cat = 2 if inrange(cancer_nonhaem_date,  d(1/2/2019), d
2021-07-14T09:52:04.422824100Z > (1/2/2020))
2021-07-14T09:52:04.424297700Z (0 real changes made)
2021-07-14T09:52:04.424313300Z 
2021-07-14T09:52:04.424318000Z . recode  cancer_exhaem_cat . = 1
2021-07-14T09:52:04.433868100Z (cancer_exhaem_cat: 12207 changes made)
2021-07-14T09:52:04.434879700Z 
2021-07-14T09:52:04.434890600Z . label values cancer_exhaem_cat cancer
2021-07-14T09:52:04.434955300Z 
2021-07-14T09:52:04.434964800Z . 
2021-07-14T09:52:04.434968600Z . 
2021-07-14T09:52:04.434971600Z . /*  Immunosuppression  */
2021-07-14T09:52:04.434974700Z . 
2021-07-14T09:52:04.434977500Z . * Immunosuppressed:
2021-07-14T09:52:04.434980700Z . * Permanent immunodeficiency ever, OR
2021-07-14T09:52:04.434984000Z . * Temporary immunodeficiency  last year
2021-07-14T09:52:04.435029600Z . gen temp1  = 1 if perm_immunodef_date!=.
2021-07-14T09:52:04.436380400Z (12,214 missing values generated)
2021-07-14T09:52:04.436389300Z 
2021-07-14T09:52:04.436393400Z . gen temp2  = inrange(temp_immunodef_date, (date("$indexdate", "DMY") - 365), 
2021-07-14T09:52:04.436397200Z > date("$indexdate", "DMY"))
2021-07-14T09:52:04.452867500Z 
2021-07-14T09:52:04.452889500Z . 
2021-07-14T09:52:04.452892000Z . egen other_immuno = rowmax(temp1 temp2)
2021-07-14T09:52:04.464380200Z 
2021-07-14T09:52:04.464399100Z . drop temp1 temp2
2021-07-14T09:52:04.465219200Z 
2021-07-14T09:52:04.465233000Z . order other_immuno, after(temp_immunodef)
2021-07-14T09:52:04.466696700Z 
2021-07-14T09:52:04.466708800Z . 
2021-07-14T09:52:04.466712700Z . /*  Blood pressure   */
2021-07-14T09:52:04.466716000Z . 
2021-07-14T09:52:04.466719100Z . * Categorise
2021-07-14T09:52:04.466722100Z . gen     bpcat = 1 if bp_sys < 120 &  bp_dias < 80
2021-07-14T09:52:04.468593900Z (14,494 missing values generated)
2021-07-14T09:52:04.468602300Z 
2021-07-14T09:52:04.468604800Z . replace bpcat = 2 if inrange(bp_sys, 120, 130) & bp_dias<80
2021-07-14T09:52:04.470181100Z (0 real changes made)
2021-07-14T09:52:04.470191500Z 
2021-07-14T09:52:04.470195400Z . replace bpcat = 3 if inrange(bp_sys, 130, 140) | inrange(bp_dias, 80, 90)
2021-07-14T09:52:04.471685600Z (22 real changes made)
2021-07-14T09:52:04.471699100Z 
2021-07-14T09:52:04.471703400Z . replace bpcat = 4 if (bp_sys>=140 & bp_sys<.) | (bp_dias>=90 & bp_dias<.)
2021-07-14T09:52:04.475410600Z (14,472 real changes made)
2021-07-14T09:52:04.475428600Z 
2021-07-14T09:52:04.475433400Z . replace bpcat = .u if bp_sys>=. | bp_dias>=. | bp_sys==0 | bp_dias==0
2021-07-14T09:52:04.478294700Z (1,490 real changes made, 1,490 to missing)
2021-07-14T09:52:04.478310500Z 
2021-07-14T09:52:04.478314400Z . 
2021-07-14T09:52:04.478317400Z . label define bpcat 1 "Normal" 2 "Elevated" 3 "High, stage I"    ///
2021-07-14T09:52:04.478320900Z >                                         4 "High, stage II" .u "Unknown"
2021-07-14T09:52:04.478453100Z 
2021-07-14T09:52:04.478476400Z . label values bpcat bpcat
2021-07-14T09:52:04.478483200Z 
2021-07-14T09:52:04.478485300Z . 
2021-07-14T09:52:04.478488100Z . recode bpcat .u=1, gen(bpcat_nomiss)
2021-07-14T09:52:04.486553300Z (1490 differences between bpcat and bpcat_nomiss)
2021-07-14T09:52:04.489904200Z 
2021-07-14T09:52:04.489919700Z . label values bpcat_nomiss bpcat
2021-07-14T09:52:04.489923800Z 
2021-07-14T09:52:04.489926900Z . 
2021-07-14T09:52:04.489929900Z . * Create non-missing indicator of known high blood pressure
2021-07-14T09:52:04.489933200Z . gen bphigh = (bpcat==4)
2021-07-14T09:52:04.490665700Z 
2021-07-14T09:52:04.490675600Z . 
2021-07-14T09:52:04.490680000Z . /*  Hypertension  */
2021-07-14T09:52:04.490683300Z . 
2021-07-14T09:52:04.490686200Z . gen htdiag_or_highbp = bphigh
2021-07-14T09:52:04.491191900Z 
2021-07-14T09:52:04.491200500Z . recode htdiag_or_highbp 0 = 1 if hypertension==1
2021-07-14T09:52:04.499048300Z (htdiag_or_highbp: 321 changes made)
2021-07-14T09:52:04.500325800Z 
2021-07-14T09:52:04.500337600Z . 
2021-07-14T09:52:04.500341300Z . 
2021-07-14T09:52:04.500344400Z . ************
2021-07-14T09:52:04.500347500Z . *   eGFR   *
2021-07-14T09:52:04.500350500Z . ************
2021-07-14T09:52:04.500353700Z . 
2021-07-14T09:52:04.500356800Z . * Set implausible creatinine values to missing (Note: zero changed to missing
2021-07-14T09:52:04.500360000Z > )
2021-07-14T09:52:04.500363300Z . replace creatinine = . if !inrange(creatinine, 20, 3000)
2021-07-14T09:52:04.501718200Z (796 real changes made, 796 to missing)
2021-07-14T09:52:04.501729300Z 
2021-07-14T09:52:04.501744800Z . 
2021-07-14T09:52:04.501748200Z . * Divide by 88.4 (to convert umol/l to mg/dl)
2021-07-14T09:52:04.501751300Z . gen SCr_adj = creatinine/88.4
2021-07-14T09:52:04.503393600Z (796 missing values generated)
2021-07-14T09:52:04.503404400Z 
2021-07-14T09:52:04.503406800Z . 
2021-07-14T09:52:04.503408800Z . gen min=.
2021-07-14T09:52:04.503968700Z (15,267 missing values generated)
2021-07-14T09:52:04.503976800Z 
2021-07-14T09:52:04.503978900Z . replace min = SCr_adj/0.7 if male==0
2021-07-14T09:52:04.506337800Z (7,403 real changes made)
2021-07-14T09:52:04.506360600Z 
2021-07-14T09:52:04.506543800Z . replace min = SCr_adj/0.9 if male==1
2021-07-14T09:52:04.509164000Z (7,068 real changes made)
2021-07-14T09:52:04.509180700Z 
2021-07-14T09:52:04.509184900Z . replace min = min^-0.329  if male==0
2021-07-14T09:52:04.511904500Z (7,403 real changes made)
2021-07-14T09:52:04.511921900Z 
2021-07-14T09:52:04.511925900Z . replace min = min^-0.411  if male==1
2021-07-14T09:52:04.514147400Z (7,068 real changes made)
2021-07-14T09:52:04.514159700Z 
2021-07-14T09:52:04.514162600Z . replace min = 1 if min<1
2021-07-14T09:52:04.515367500Z (4,017 real changes made)
2021-07-14T09:52:04.515374800Z 
2021-07-14T09:52:04.515377000Z . 
2021-07-14T09:52:04.515378900Z . gen max=.
2021-07-14T09:52:04.515790900Z (15,267 missing values generated)
2021-07-14T09:52:04.515797600Z 
2021-07-14T09:52:04.515799800Z . replace max=SCr_adj/0.7 if male==0
2021-07-14T09:52:04.517526300Z (7,403 real changes made)
2021-07-14T09:52:04.517536400Z 
2021-07-14T09:52:04.517538800Z . replace max=SCr_adj/0.9 if male==1
2021-07-14T09:52:04.519496100Z (7,068 real changes made)
2021-07-14T09:52:04.519505900Z 
2021-07-14T09:52:04.519508100Z . replace max=max^-1.209
2021-07-14T09:52:04.521685300Z (14,471 real changes made)
2021-07-14T09:52:04.521697400Z 
2021-07-14T09:52:04.521701400Z . replace max=1 if max>1
2021-07-14T09:52:04.523927200Z (11,250 real changes made)
2021-07-14T09:52:04.523937200Z 
2021-07-14T09:52:04.523940300Z . 
2021-07-14T09:52:04.523943200Z . gen egfr=min*max*141
2021-07-14T09:52:04.525210100Z (796 missing values generated)
2021-07-14T09:52:04.525221300Z 
2021-07-14T09:52:04.525225100Z . replace egfr=egfr*(0.993^age)
2021-07-14T09:52:04.528530200Z (14,471 real changes made)
2021-07-14T09:52:04.528544200Z 
2021-07-14T09:52:04.528558900Z . replace egfr=egfr*1.018 if male==0
2021-07-14T09:52:04.530376800Z (7,403 real changes made)
2021-07-14T09:52:04.530390600Z 
2021-07-14T09:52:04.530394800Z . label var egfr "egfr calculated using CKD-EPI formula with no eth"
2021-07-14T09:52:04.530398200Z 
2021-07-14T09:52:04.530401000Z . 
2021-07-14T09:52:04.530404100Z . * Categorise into ckd stages
2021-07-14T09:52:04.530407400Z . egen egfr_cat = cut(egfr), at(0, 15, 30, 45, 60, 5000)
2021-07-14T09:52:04.539857000Z (796 missing values generated)
2021-07-14T09:52:04.540252600Z 
2021-07-14T09:52:04.540263300Z . recode egfr_cat 0=5 15=4 30=3 45=2 60=0, generate(ckd)
2021-07-14T09:52:04.560907900Z (14471 differences between egfr_cat and ckd)
2021-07-14T09:52:04.564566300Z 
2021-07-14T09:52:04.564583200Z . * 0 = "No CKD"  2 "stage 3a" 3 "stage 3b" 4 "stage 4" 5 "stage 5"
2021-07-14T09:52:04.564588400Z . label define ckd 0 "No CKD" 1 "CKD"
2021-07-14T09:52:04.564592100Z 
2021-07-14T09:52:04.564595400Z . label values ckd ckd
2021-07-14T09:52:04.564711500Z 
2021-07-14T09:52:04.564721800Z . *label var ckd "CKD stage calc without eth"
2021-07-14T09:52:04.564734000Z . 
2021-07-14T09:52:04.564736800Z . * Convert into CKD group
2021-07-14T09:52:04.564738700Z . *recode ckd 2/5=1, gen(chronic_kidney_disease)
2021-07-14T09:52:04.564740600Z . *replace chronic_kidney_disease = 0 if creatinine==.
2021-07-14T09:52:04.564742600Z . 
2021-07-14T09:52:04.564744400Z . recode ckd 0=1 2/3=2 4/5=3, gen(reduced_kidney_function_cat)
2021-07-14T09:52:04.584863200Z (14316 differences between ckd and reduced_kidney_function_cat)
2021-07-14T09:52:04.588615800Z 
2021-07-14T09:52:04.588659200Z . replace reduced_kidney_function_cat = 1 if creatinine==.
2021-07-14T09:52:04.589887400Z (796 real changes made)
2021-07-14T09:52:04.589898500Z 
2021-07-14T09:52:04.589902300Z . label define reduced_kidney_function_catlab ///
2021-07-14T09:52:04.589905700Z >         1 "None" 2 "Stage 3a/3b egfr 30-60      " 3 "Stage 4/5 egfr<30"
2021-07-14T09:52:04.589909600Z 
2021-07-14T09:52:04.589912400Z . label values reduced_kidney_function_cat reduced_kidney_function_catlab
2021-07-14T09:52:04.590080500Z 
2021-07-14T09:52:04.590091500Z . lab var  reduced "Reduced kidney function"
2021-07-14T09:52:04.590095400Z 
2021-07-14T09:52:04.590098200Z . 
2021-07-14T09:52:04.590100900Z . 
2021-07-14T09:52:04.590103400Z . 
2021-07-14T09:52:04.590106200Z . /*ESDR: dialysis or kidney transplant*/
2021-07-14T09:52:04.590109400Z . gen esrd=1 if dialysis==1 | kidney_transplant==1
2021-07-14T09:52:04.592537100Z (9,804 missing values generated)
2021-07-14T09:52:04.592550700Z 
2021-07-14T09:52:04.592554900Z . recode esrd .=0
2021-07-14T09:52:04.602879900Z (esrd: 9804 changes made)
2021-07-14T09:52:04.603874200Z 
2021-07-14T09:52:04.603885500Z . 
2021-07-14T09:52:04.603888800Z . 
2021-07-14T09:52:04.603891400Z . /* Hb1AC */
2021-07-14T09:52:04.603894000Z . 
2021-07-14T09:52:04.603896400Z . /*  Diabetes severity  */
2021-07-14T09:52:04.603899000Z . 
2021-07-14T09:52:04.603901300Z . * Set zero or negative to missing
2021-07-14T09:52:04.603903800Z . replace hba1c_percentage   = . if hba1c_percentage <= 0
2021-07-14T09:52:04.605019300Z (869 real changes made, 869 to missing)
2021-07-14T09:52:04.605027900Z 
2021-07-14T09:52:04.605030200Z . replace hba1c_mmol_per_mol = . if hba1c_mmol_per_mol <= 0
2021-07-14T09:52:04.606127400Z (1,071 real changes made, 1,071 to missing)
2021-07-14T09:52:04.606136400Z 
2021-07-14T09:52:04.606139500Z . 
2021-07-14T09:52:04.606141900Z . /* Express  HbA1c as percentage  */
2021-07-14T09:52:04.606144400Z . 
2021-07-14T09:52:04.606146600Z . * Express all values as perecentage
2021-07-14T09:52:04.606149200Z . noi summ hba1c_percentage hba1c_mmol_per_mol
2021-07-14T09:52:04.606982000Z 
2021-07-14T09:52:04.606990400Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-07-14T09:52:04.606993800Z -------------+---------------------------------------------------------
2021-07-14T09:52:04.606996800Z hba1c_per~ge |     14,398    5.038612    1.962819   .0001631   13.16465
2021-07-14T09:52:04.607631400Z hba1c_mmol~l |     14,196    41.02306    18.83798   .0419214   119.6719
2021-07-14T09:52:04.607640800Z 
2021-07-14T09:52:04.607644800Z . gen     hba1c_pct = hba1c_percentage
2021-07-14T09:52:04.608169300Z (869 missing values generated)
2021-07-14T09:52:04.608177700Z 
2021-07-14T09:52:04.608180900Z . replace hba1c_pct = (hba1c_mmol_per_mol/10.929)+2.15 if hba1c_mmol_per_mol<.
2021-07-14T09:52:04.610168500Z (14,196 real changes made)
2021-07-14T09:52:04.610181300Z 
2021-07-14T09:52:04.610185300Z . 
2021-07-14T09:52:04.610188400Z . * Valid % range between 0-20  /195 mmol/mol
2021-07-14T09:52:04.610191800Z . replace hba1c_pct = . if !inrange(hba1c_pct, 0, 20)
2021-07-14T09:52:04.611573300Z (0 real changes made)
2021-07-14T09:52:04.611585500Z 
2021-07-14T09:52:04.611589400Z . replace hba1c_pct = round(hba1c_pct, 0.1)
2021-07-14T09:52:04.613751700Z (15,208 real changes made)
2021-07-14T09:52:04.613763700Z 
2021-07-14T09:52:04.613775900Z . 
2021-07-14T09:52:04.613778100Z . 
2021-07-14T09:52:04.613780000Z . /* Categorise hba1c and diabetes  */
2021-07-14T09:52:04.613782000Z . /* Diabetes type */
2021-07-14T09:52:04.613784100Z . gen dm_type=1 if diabetes_type=="T1DM"
2021-07-14T09:52:04.616206400Z (14,806 missing values generated)
2021-07-14T09:52:04.616220600Z 
2021-07-14T09:52:04.616224700Z . replace dm_type=2 if diabetes_type=="T2DM"
2021-07-14T09:52:04.618429800Z (3,130 real changes made)
2021-07-14T09:52:04.618439100Z 
2021-07-14T09:52:04.618441400Z . replace dm_type=3 if diabetes_type=="UNKNOWN_DM"
2021-07-14T09:52:04.620925000Z (306 real changes made)
2021-07-14T09:52:04.620937700Z 
2021-07-14T09:52:04.620941500Z . replace dm_type=0 if diabetes_type=="NO_DM"
2021-07-14T09:52:04.624134300Z (11,370 real changes made)
2021-07-14T09:52:04.624154800Z 
2021-07-14T09:52:04.624159500Z . 
2021-07-14T09:52:04.624163300Z . safetab dm_type diabetes_type
2021-07-14T09:52:04.624662200Z 0
2021-07-14T09:52:04.634758800Z 
2021-07-14T09:52:04.634774900Z            |                diabetes_type
2021-07-14T09:52:04.634779100Z    dm_type |     NO_DM       T1DM       T2DM  UNKNOWN.. |     Total
2021-07-14T09:52:04.634782400Z -----------+--------------------------------------------+----------
2021-07-14T09:52:04.634785600Z          0 |    11,370          0          0          0 |    11,370 
2021-07-14T09:52:04.634788600Z          1 |         0        461          0          0 |       461 
2021-07-14T09:52:04.634791700Z          2 |         0          0      3,130          0 |     3,130 
2021-07-14T09:52:04.634794700Z          3 |         0          0          0        306 |       306 
2021-07-14T09:52:04.634797900Z -----------+--------------------------------------------+----------
2021-07-14T09:52:04.634801000Z      Total |    11,370        461      3,130        306 |    15,267 
2021-07-14T09:52:04.634804100Z 
2021-07-14T09:52:04.634807000Z . label define dm_type 0"No DM" 1"T1DM" 2"T2DM" 3"UNKNOWN_DM"
2021-07-14T09:52:04.634810800Z 
2021-07-14T09:52:04.634813800Z . label values dm_type dm_type
2021-07-14T09:52:04.634885300Z 
2021-07-14T09:52:04.634895700Z . 
2021-07-14T09:52:04.634899600Z . *Open safely diabetes codes with exeter algorithm
2021-07-14T09:52:04.634902900Z . gen dm_type_exeter_os=1 if diabetes_exeter_os=="T1DM_EX_OS"
2021-07-14T09:52:04.637488800Z (14,836 missing values generated)
2021-07-14T09:52:04.637497000Z 
2021-07-14T09:52:04.637499400Z . replace dm_type_exeter_os=2 if diabetes_exeter_os=="T2DM_EX_OS"
2021-07-14T09:52:04.640166500Z (3,092 real changes made)
2021-07-14T09:52:04.640176500Z 
2021-07-14T09:52:04.640180400Z . replace dm_type_exeter_os=0 if diabetes_exeter_os=="NO_DM"
2021-07-14T09:52:04.642944900Z (11,744 real changes made)
2021-07-14T09:52:04.642971000Z 
2021-07-14T09:52:04.642976000Z . label values  dm_type_exeter_os dm_type
2021-07-14T09:52:04.643116600Z 
2021-07-14T09:52:04.643126800Z . 
2021-07-14T09:52:04.643131100Z . * Group hba1c
2021-07-14T09:52:04.643134900Z . gen     hba1ccat = 0 if hba1c_pct <  6.5
2021-07-14T09:52:04.644876900Z (5,519 missing values generated)
2021-07-14T09:52:04.644889300Z 
2021-07-14T09:52:04.644893100Z . replace hba1ccat = 1 if hba1c_pct >= 6.5  & hba1c_pct < 7.5
2021-07-14T09:52:04.647238900Z (2,666 real changes made)
2021-07-14T09:52:04.647249100Z 
2021-07-14T09:52:04.647251500Z . replace hba1ccat = 2 if hba1c_pct >= 7.5  & hba1c_pct < 8
2021-07-14T09:52:04.648949700Z (936 real changes made)
2021-07-14T09:52:04.648959400Z 
2021-07-14T09:52:04.648963400Z . replace hba1ccat = 3 if hba1c_pct >= 8    & hba1c_pct < 9
2021-07-14T09:52:04.650389300Z (1,195 real changes made)
2021-07-14T09:52:04.650398900Z 
2021-07-14T09:52:04.650402800Z . replace hba1ccat = 4 if hba1c_pct >= 9    & hba1c_pct !=.
2021-07-14T09:52:04.651232600Z (663 real changes made)
2021-07-14T09:52:04.651239600Z 
2021-07-14T09:52:04.651241800Z . label define hba1ccat 0 "<6.5%" 1">=6.5-7.4" 2">=7.5-7.9" 3">=8-8.9" 4">=9"
2021-07-14T09:52:04.651244400Z 
2021-07-14T09:52:04.651246200Z . label values hba1ccat hba1ccat
2021-07-14T09:52:04.651470900Z 
2021-07-14T09:52:04.651480700Z . safetab hba1ccat
2021-07-14T09:52:04.651814200Z 0
2021-07-14T09:52:04.656062100Z 
2021-07-14T09:52:04.656074800Z    hba1ccat |      Freq.     Percent        Cum.
2021-07-14T09:52:04.656077600Z ------------+-----------------------------------
2021-07-14T09:52:04.656079600Z       <6.5% |      9,748       64.10       64.10
2021-07-14T09:52:04.656081700Z   >=6.5-7.4 |      2,666       17.53       81.63
2021-07-14T09:52:04.656083700Z   >=7.5-7.9 |        936        6.15       87.78
2021-07-14T09:52:04.656085700Z     >=8-8.9 |      1,195        7.86       95.64
2021-07-14T09:52:04.656087700Z         >=9 |        663        4.36      100.00
2021-07-14T09:52:04.656089700Z ------------+-----------------------------------
2021-07-14T09:52:04.656091600Z       Total |     15,208      100.00
2021-07-14T09:52:04.656093400Z 
2021-07-14T09:52:04.656095200Z . 
2021-07-14T09:52:04.656115500Z . gen hba1c75=0 if hba1c_pct<7.5
2021-07-14T09:52:04.657408300Z (2,853 missing values generated)
2021-07-14T09:52:04.657416200Z 
2021-07-14T09:52:04.657418700Z . replace hba1c75=1 if hba1c_pct>=7.5 & hba1c_pct!=.
2021-07-14T09:52:04.658691100Z (2,794 real changes made)
2021-07-14T09:52:04.658698000Z 
2021-07-14T09:52:04.658700200Z . label define hba1c75 0"<7.5" 1">=7.5"
2021-07-14T09:52:04.658777200Z 
2021-07-14T09:52:04.658784200Z . safetab hba1c75, m
2021-07-14T09:52:04.659050000Z 8
2021-07-14T09:52:04.661191000Z 
2021-07-14T09:52:04.661208100Z     hba1c75 |      Freq.     Percent        Cum.
2021-07-14T09:52:04.661212200Z ------------+-----------------------------------
2021-07-14T09:52:04.661215600Z           0 |     12,414       81.31       81.31
2021-07-14T09:52:04.661218900Z           1 |      2,794       18.30       99.61
2021-07-14T09:52:04.661222200Z           . |         59        0.39      100.00
2021-07-14T09:52:04.661225600Z ------------+-----------------------------------
2021-07-14T09:52:04.661228600Z       Total |     15,267      100.00
2021-07-14T09:52:04.661233000Z 
2021-07-14T09:52:04.661236100Z . 
2021-07-14T09:52:04.661239100Z . * Create diabetes, split by control/not
2021-07-14T09:52:04.661242300Z . gen     diabcat = 1 if dm_type==0
2021-07-14T09:52:04.665177300Z (3,897 missing values generated)
2021-07-14T09:52:04.665194100Z 
2021-07-14T09:52:04.665197400Z . replace diabcat = 2 if dm_type==1 & inlist(hba1ccat, 0, 1)
2021-07-14T09:52:04.670088700Z (377 real changes made)
2021-07-14T09:52:04.670104700Z 
2021-07-14T09:52:04.670108800Z . replace diabcat = 3 if dm_type==1 & inlist(hba1ccat, 2, 3, 4)
2021-07-14T09:52:04.672762000Z (82 real changes made)
2021-07-14T09:52:04.672799900Z 
2021-07-14T09:52:04.672804700Z . replace diabcat = 4 if dm_type==2 & inlist(hba1ccat, 0, 1)
2021-07-14T09:52:04.675765600Z (2,532 real changes made)
2021-07-14T09:52:04.675780900Z 
2021-07-14T09:52:04.675784600Z . replace diabcat = 5 if dm_type==2 & inlist(hba1ccat, 2, 3, 4)
2021-07-14T09:52:04.678605700Z (585 real changes made)
2021-07-14T09:52:04.678632600Z 
2021-07-14T09:52:04.678639200Z . replace diabcat = 6 if dm_type==1 & hba1c_pct==. | dm_type==2 & hba1c_pct==.
2021-07-14T09:52:04.683371600Z (15 real changes made)
2021-07-14T09:52:04.683389100Z 
2021-07-14T09:52:04.692943400Z . 
2021-07-14T09:52:04.692964400Z . 
2021-07-14T09:52:04.692967800Z . label define diabcat    1 "No diabetes"                         ///
2021-07-14T09:52:04.692982700Z >                                                 2 "T1DM, controlled"         
2021-07-14T09:52:04.692986700Z >    ///
2021-07-14T09:52:04.692989800Z >                                                 3 "T1DM, uncontrolled"       
2021-07-14T09:52:04.692993300Z >    ///
2021-07-14T09:52:04.692996400Z >                                                 4 "T2DM, controlled"         
2021-07-14T09:52:04.692999800Z >    ///
2021-07-14T09:52:04.693002800Z >                                                 5 "T2DM, uncontrolled"       
2021-07-14T09:52:04.693005600Z >    ///
2021-07-14T09:52:04.693008000Z >                                                 6 "Diabetes, no HbA1c"
2021-07-14T09:52:04.693010700Z 
2021-07-14T09:52:04.693013500Z . label values diabcat diabcat
2021-07-14T09:52:04.693016700Z 
2021-07-14T09:52:04.693019600Z . safetab diabcat, m
2021-07-14T09:52:04.693022700Z 8
2021-07-14T09:52:04.694597000Z 
2021-07-14T09:52:04.694613100Z            diabcat |      Freq.     Percent        Cum.
2021-07-14T09:52:04.694617300Z -------------------+-----------------------------------
2021-07-14T09:52:04.694620300Z        No diabetes |     11,370       74.47       74.47
2021-07-14T09:52:04.694623100Z   T1DM, controlled |        377        2.47       76.94
2021-07-14T09:52:04.694626300Z T1DM, uncontrolled |         82        0.54       77.48
2021-07-14T09:52:04.694629200Z   T2DM, controlled |      2,532       16.58       94.07
2021-07-14T09:52:04.694632300Z T2DM, uncontrolled |        585        3.83       97.90
2021-07-14T09:52:04.694635500Z Diabetes, no HbA1c |         15        0.10       98.00
2021-07-14T09:52:04.694638700Z                  . |        306        2.00      100.00
2021-07-14T09:52:04.694641400Z -------------------+-----------------------------------
2021-07-14T09:52:04.695421200Z              Total |     15,267      100.00
2021-07-14T09:52:04.695431000Z 
2021-07-14T09:52:04.695435200Z . 
2021-07-14T09:52:04.695553600Z . 
2021-07-14T09:52:04.695561400Z . 
2021-07-14T09:52:04.695595700Z . /*  Asthma  */
2021-07-14T09:52:04.695601500Z . 
2021-07-14T09:52:04.695604600Z . 
2021-07-14T09:52:04.695607600Z . * Asthma  (coded: 0 No, 1 Yes no OCS, 2 Yes with OCS)
2021-07-14T09:52:04.695610900Z . rename asthma asthmacat
2021-07-14T09:52:04.695655700Z 
2021-07-14T09:52:04.695664600Z . recode asthmacat 0=1 1=2 2=3
2021-07-14T09:52:04.734930800Z (asthmacat: 3054 changes made)
2021-07-14T09:52:04.736225800Z 
2021-07-14T09:52:04.736237700Z . label define asthmacat 1 "No" 2 "Yes, no OCS" 3 "Yes with OCS"
2021-07-14T09:52:04.736249500Z 
2021-07-14T09:52:04.736251600Z . label values asthmacat asthmacat
2021-07-14T09:52:04.736475600Z 
2021-07-14T09:52:04.736484400Z . 
2021-07-14T09:52:04.736488100Z . gen asthma = (asthmacat==2|asthmacat==3)
2021-07-14T09:52:04.738352700Z 
2021-07-14T09:52:04.738363100Z . 
2021-07-14T09:52:04.738367100Z . /*  Probable shielding  */
2021-07-14T09:52:04.738370500Z . gen shield=1 if esrd==1 | other_transplant==1 | asthmacat==2 | asthmacat==3 |
2021-07-14T09:52:04.738373700Z >  ///
2021-07-14T09:52:04.738377200Z > chronic_respiratory_disease==1 | cancer_haem==1 | cancer_nonhaem==1 | ///
2021-07-14T09:52:04.738379500Z > asplenia==1 | other_immuno==1
2021-07-14T09:52:04.743930400Z (1,836 missing values generated)
2021-07-14T09:52:04.743948100Z 
2021-07-14T09:52:04.743951800Z . recode shield .=0
2021-07-14T09:52:04.749687000Z (shield: 1836 changes made)
2021-07-14T09:52:04.750380400Z 
2021-07-14T09:52:04.750388400Z . 
2021-07-14T09:52:04.750390500Z . 
2021-07-14T09:52:04.750392400Z . /* OUTCOME AND SURVIVAL TIME=================================================
2021-07-14T09:52:04.750394400Z > =*/
2021-07-14T09:52:04.750396300Z . 
2021-07-14T09:52:04.750398200Z . /*  Cohort entry and censor dates  */
2021-07-14T09:52:04.750400200Z . * Date of cohort entry, 1 Feb 2019
2021-07-14T09:52:04.750402400Z . gen enter_date = date("$indexdate", "DMY")
2021-07-14T09:52:04.758010900Z 
2021-07-14T09:52:04.758030900Z . 
2021-07-14T09:52:04.758034500Z . * Date of study end (typically: last date of outcome data available)
2021-07-14T09:52:04.758038000Z . **** NOTE!! NEEDS UPDATING!!!!
2021-07-14T09:52:04.758041000Z . gen tpp_infec_censor_date           = date("$tpp_infec_censor",         "DMY"
2021-07-14T09:52:04.758044500Z > )
2021-07-14T09:52:04.765962100Z 
2021-07-14T09:52:04.765989600Z . 
2021-07-14T09:52:04.765993900Z . * Format the dates
2021-07-14T09:52:04.765997100Z . format  enter_date                                      ///
2021-07-14T09:52:04.766000000Z >                 tpp_infec_censor_date   %td
2021-07-14T09:52:04.766003500Z 
2021-07-14T09:52:04.766006200Z . 
2021-07-14T09:52:04.766008700Z . 
2021-07-14T09:52:04.766011300Z .                         /****   Outcome definitions   ****/
2021-07-14T09:52:04.766014200Z . 
2021-07-14T09:52:04.766016900Z . 
2021-07-14T09:52:04.766019500Z . * Binary indicator for outcomes
2021-07-14T09:52:04.766022500Z . gen worms = (worms_date < .)
2021-07-14T09:52:04.767582400Z 
2021-07-14T09:52:04.767593800Z . 
2021-07-14T09:52:04.767596300Z .                                         /**** Create survival times  ****/
2021-07-14T09:52:04.767598400Z . * For looping later, name must be stime_binary_outcome_name
2021-07-14T09:52:04.767600400Z . 
2021-07-14T09:52:04.767602200Z . * Survival time = last followup date (first: end study, death, or that outcom
2021-07-14T09:52:04.767604300Z > e)
2021-07-14T09:52:04.767606300Z . gen stime_worms = min(tpp_infec_censor_date, died_date_ons, worms_date, dereg
2021-07-14T09:52:04.767608300Z > _date)
2021-07-14T09:52:04.771382800Z 
2021-07-14T09:52:04.771396700Z . 
2021-07-14T09:52:04.771399400Z . * If outcome was after censoring occurred, set to zero
2021-07-14T09:52:04.771401600Z . replace worms   = 0 if (worms_date      > tpp_infec_censor_date)
2021-07-14T09:52:04.773703600Z (1,808 real changes made)
2021-07-14T09:52:04.773716400Z 
2021-07-14T09:52:04.773720400Z . 
2021-07-14T09:52:04.773723500Z . * Format date variables
2021-07-14T09:52:04.773726600Z . format  stime* %td
2021-07-14T09:52:04.773729400Z 
2021-07-14T09:52:04.773732300Z . 
2021-07-14T09:52:04.773735100Z . 
2021-07-14T09:52:04.773738100Z . /* LABEL VARIABLES===========================================================
2021-07-14T09:52:04.773741100Z > =*/
2021-07-14T09:52:04.773744300Z . *  Label variables you are intending to keep, drop the rest
2021-07-14T09:52:04.773747500Z . 
2021-07-14T09:52:04.773750200Z . *HH variable
2021-07-14T09:52:04.773753000Z . label var kids_cat3 "Presence of children or young people in the household"
2021-07-14T09:52:04.773829700Z 
2021-07-14T09:52:04.773839100Z . label var  number_kids "Number of children aged 1-<12 years in household"
2021-07-14T09:52:04.773843400Z 
2021-07-14T09:52:04.773846600Z . label var  household_size "Number people in household"
2021-07-14T09:52:04.773970200Z 
2021-07-14T09:52:04.773976600Z . label var  household_id "Household ID"
2021-07-14T09:52:04.773978800Z 
2021-07-14T09:52:04.773980600Z . 
2021-07-14T09:52:04.773982300Z . 
2021-07-14T09:52:04.773984000Z . * Demographics
2021-07-14T09:52:04.773986000Z . label var patient_id                            "Patient ID"
2021-07-14T09:52:04.774111300Z 
2021-07-14T09:52:04.774120400Z . label var age                                           "Age (years)"
2021-07-14T09:52:04.774124600Z 
2021-07-14T09:52:04.774127800Z . label var agegroup                                      "Grouped age"
2021-07-14T09:52:04.774226300Z 
2021-07-14T09:52:04.774235100Z . label var age66                                         "66 years and older"
2021-07-14T09:52:04.774422500Z 
2021-07-14T09:52:04.774431300Z . label var sex                                           "Sex"
2021-07-14T09:52:04.774435100Z 
2021-07-14T09:52:04.774441700Z . label var male                                          "Male"
2021-07-14T09:52:04.774445700Z 
2021-07-14T09:52:04.774485700Z . label var bmi                                           "Body Mass Index (BMI
2021-07-14T09:52:04.774494000Z > , kg/m2)"
2021-07-14T09:52:04.774669400Z 
2021-07-14T09:52:04.774678200Z . label var bmicat                                        "Grouped BMI"
2021-07-14T09:52:04.774681900Z 
2021-07-14T09:52:04.774684800Z . label var bmi_measured_date             "Body Mass Index (BMI, kg/m2), date m
2021-07-14T09:52:04.774687900Z > easured"
2021-07-14T09:52:04.774775600Z 
2021-07-14T09:52:04.774783100Z . label var obese4cat                                     "Evidence of obesity 
2021-07-14T09:52:04.774786300Z > (4 categories)"
2021-07-14T09:52:04.774925700Z 
2021-07-14T09:52:04.774940500Z . label var smoke                                         "Smoking status"
2021-07-14T09:52:04.774943900Z 
2021-07-14T09:52:04.774945900Z . label var smoke_nomiss                          "Smoking status (missing set 
2021-07-14T09:52:04.774948300Z > to non)"
2021-07-14T09:52:04.775072500Z 
2021-07-14T09:52:04.775080300Z . label var imd                                           "Index of Multiple De
2021-07-14T09:52:04.775084400Z > privation (IMD)"
2021-07-14T09:52:04.775087800Z 
2021-07-14T09:52:04.775090600Z . label var ethnicity                                     "Ethnicity"
2021-07-14T09:52:04.775193500Z 
2021-07-14T09:52:04.775201500Z . label var stp                                           "Sustainability and T
2021-07-14T09:52:04.775223200Z > ransformation Partnership"
2021-07-14T09:52:04.775228600Z 
2021-07-14T09:52:04.775232000Z . lab var tot_adults_hh                           "Total number adults in hh"
2021-07-14T09:52:04.775323300Z 
2021-07-14T09:52:04.775331400Z . 
2021-07-14T09:52:04.775335000Z . 
2021-07-14T09:52:04.775337900Z . * Comorbidities of interest
2021-07-14T09:52:04.775341100Z . label var asthma                                                "Asthma categ
2021-07-14T09:52:04.775344300Z > ory"
2021-07-14T09:52:04.775459200Z 
2021-07-14T09:52:04.775466600Z . label var egfr_cat                                              "Calculated e
2021-07-14T09:52:04.775476500Z > GFR"
2021-07-14T09:52:04.775481000Z 
2021-07-14T09:52:04.775484100Z . label var hypertension                              "Diagnosed hypertension"
2021-07-14T09:52:04.775577100Z 
2021-07-14T09:52:04.775585500Z . label var chronic_respiratory_disease   "Chronic Respiratory Diseases"
2021-07-14T09:52:04.775606600Z 
2021-07-14T09:52:04.775609100Z . label var chronic_cardiac_disease               "Chronic Cardiac Diseases"
2021-07-14T09:52:04.775703000Z 
2021-07-14T09:52:04.775712200Z . label var diabcat                                               "Diabetes"
2021-07-14T09:52:04.775800800Z 
2021-07-14T09:52:04.775808800Z . label var cancer_haem_cat                               "Haematological cance
2021-07-14T09:52:04.775812500Z > r"
2021-07-14T09:52:04.775869200Z 
2021-07-14T09:52:04.775891400Z . label var cancer_exhaem_cat                             "Non-haematological c
2021-07-14T09:52:04.775897200Z > ancer"
2021-07-14T09:52:04.775966300Z 
2021-07-14T09:52:04.775974300Z . label var kidney_transplant                             "Kidney transplant"
2021-07-14T09:52:04.776093400Z 
2021-07-14T09:52:04.776103200Z . label var other_transplant                              "Other solid organ tr
2021-07-14T09:52:04.776107700Z > ansplant"
2021-07-14T09:52:04.776111100Z 
2021-07-14T09:52:04.776113100Z . label var asplenia                                              "Asplenia"
2021-07-14T09:52:04.776230700Z 
2021-07-14T09:52:04.776239100Z . label var other_immuno                                  "Immunosuppressed (co
2021-07-14T09:52:04.776243200Z > mbination algorithm)"
2021-07-14T09:52:04.776247000Z 
2021-07-14T09:52:04.776250000Z . label var chronic_liver_disease                 "Chronic liver disease"
2021-07-14T09:52:04.776375500Z 
2021-07-14T09:52:04.776381900Z . label var other_neuro                                   "Neurological disease
2021-07-14T09:52:04.776384400Z > "
2021-07-14T09:52:04.776386300Z 
2021-07-14T09:52:04.776388100Z . label var stroke_dementia                           "Stroke or dementia"
2021-07-14T09:52:04.776498500Z 
2021-07-14T09:52:04.776506800Z . label var ra_sle_psoriasis                              "Autoimmune disease"
2021-07-14T09:52:04.776510700Z 
2021-07-14T09:52:04.776513700Z . lab var egfr                                                    eGFR
2021-07-14T09:52:04.776656400Z 
2021-07-14T09:52:04.776664900Z . lab var perm_immunodef                                  "Permanent immunosupp
2021-07-14T09:52:04.776669000Z > ression"
2021-07-14T09:52:04.776672300Z 
2021-07-14T09:52:04.776679200Z . lab var temp_immunodef                                  "Temporary immunosupp
2021-07-14T09:52:04.776681400Z > ression"
2021-07-14T09:52:04.776817000Z 
2021-07-14T09:52:04.776826600Z . lab var esrd                                                    "End-stage re
2021-07-14T09:52:04.776841800Z > nal disease"
2021-07-14T09:52:04.776848900Z 
2021-07-14T09:52:04.776852500Z . 
2021-07-14T09:52:04.776855800Z . label var hypertension_date                                     "Diagnosed hy
2021-07-14T09:52:04.776859200Z > pertension Date"
2021-07-14T09:52:04.776964900Z 
2021-07-14T09:52:04.776973300Z . label var chronic_respiratory_disease_date      "Other Respiratory Diseases D
2021-07-14T09:52:04.776977300Z > ate"
2021-07-14T09:52:04.776980400Z 
2021-07-14T09:52:04.776983500Z . label var chronic_cardiac_disease_date          "Other Heart Diseases Date"
2021-07-14T09:52:04.777122700Z 
2021-07-14T09:52:04.777131500Z . label var diabetes_date                                         "Diabetes Dat
2021-07-14T09:52:04.777135600Z > e"
2021-07-14T09:52:04.777139700Z 
2021-07-14T09:52:04.777142600Z . label var cancer_haem_date                                      "Haem cancer 
2021-07-14T09:52:04.777144800Z > Date"
2021-07-14T09:52:04.777266200Z 
2021-07-14T09:52:04.777274100Z . label var cancer_nonhaem_date                           "Non-haem cancer Date
2021-07-14T09:52:04.777277900Z > "
2021-07-14T09:52:04.777377400Z 
2021-07-14T09:52:04.777386200Z . label var chronic_liver_disease_date            "Chronic liver disease Date"
2021-07-14T09:52:04.777601000Z 
2021-07-14T09:52:04.777609200Z . label var other_neuro_date                                      "Neurological
2021-07-14T09:52:04.777613200Z >  disease  Date"
2021-07-14T09:52:04.777616100Z 
2021-07-14T09:52:04.777618600Z . label var stroke_dementia_date                      "Stroke or dementia date"
2021-07-14T09:52:04.777795800Z 
2021-07-14T09:52:04.777805000Z . label var ra_sle_psoriasis_date                         "Autoimmune disease  
2021-07-14T09:52:04.777809400Z > Date"
2021-07-14T09:52:04.777812700Z 
2021-07-14T09:52:04.777815600Z . lab var perm_immunodef_date                             "Permanent immunosupp
2021-07-14T09:52:04.777817800Z > ression date"
2021-07-14T09:52:04.778016700Z 
2021-07-14T09:52:04.778024900Z . lab var temp_immunodef_date                             "Temporary immunosupp
2021-07-14T09:52:04.778028500Z > ression date"
2021-07-14T09:52:04.778031400Z 
2021-07-14T09:52:04.778041500Z . label var kidney_transplant_date                                             
2021-07-14T09:52:04.778045300Z >    "Kidney transplant"
2021-07-14T09:52:04.778241000Z 
2021-07-14T09:52:04.778250000Z . label var other_transplant_date                                         "Othe
2021-07-14T09:52:04.778254600Z > r solid organ transplant"
2021-07-14T09:52:04.778449200Z 
2021-07-14T09:52:04.778458400Z . label var asplenia_date                                                 "Aspl
2021-07-14T09:52:04.778462700Z > enia date"
2021-07-14T09:52:04.778543600Z 
2021-07-14T09:52:04.778553000Z . lab var  bphigh "non-missing indicator of known high blood pressure"
2021-07-14T09:52:04.778765700Z 
2021-07-14T09:52:04.778773400Z . lab var bpcat "Blood pressure four levels, non-missing"
2021-07-14T09:52:04.778777300Z 
2021-07-14T09:52:04.778780300Z . lab var htdiag_or_highbp "High blood pressure or hypertension diagnosis"
2021-07-14T09:52:04.778932800Z 
2021-07-14T09:52:04.778973500Z . lab var shield "Probable shielding"
2021-07-14T09:52:04.778978400Z 
2021-07-14T09:52:04.779061200Z . 
2021-07-14T09:52:04.779069800Z . *Key DATES
2021-07-14T09:52:04.779073200Z . label var   died_date_ons                               "Date death ONS"
2021-07-14T09:52:04.779264200Z 
2021-07-14T09:52:04.779272200Z . label var enter_date                                    "Date of study entry"
2021-07-14T09:52:04.779276100Z 
2021-07-14T09:52:04.779279000Z . lab var  dereg_date                                             "Date deregis
2021-07-14T09:52:04.779282200Z > tration from practice"
2021-07-14T09:52:04.779471400Z 
2021-07-14T09:52:04.779510900Z . 
2021-07-14T09:52:04.779516000Z . 
2021-07-14T09:52:04.779519300Z . *Control outcome
2021-07-14T09:52:04.779522300Z . label var   worms                               "Failure/censoring indicator 
2021-07-14T09:52:04.779525400Z > for outcome: worms"
2021-07-14T09:52:04.779528600Z 
2021-07-14T09:52:04.779531700Z . label var   worms_date                  "Date of worms"
2021-07-14T09:52:04.779599600Z 
2021-07-14T09:52:04.779608300Z . label var  stime_worms                  "Survival time (date); outcome worms"
2021-07-14T09:52:04.779732600Z 
2021-07-14T09:52:04.779752100Z . 
2021-07-14T09:52:04.779759000Z . 
2021-07-14T09:52:04.779761400Z . 
2021-07-14T09:52:04.779763300Z . /* TIDY DATA=================================================================
2021-07-14T09:52:04.779765300Z > =*/
2021-07-14T09:52:04.779767200Z . *  Drop variables that are not needed (those not labelled)
2021-07-14T09:52:04.779774800Z . ds, not(varlabel)
2021-07-14T09:52:04.782152700Z ethnicity_~e  smoki~s_date  care_home_~e  asthmacat     max
2021-07-14T09:52:04.782286800Z bmi_measured  hba1c_mmol~e  bp_sys        diabetes      hba1c_pct
2021-07-14T09:52:04.782420500Z bp_sys_dat~e  hba1c_per~te  bp_dias       male_drop     dm_type
2021-07-14T09:52:04.782736200Z bp_sys_dat~d  cancer_haem   creatinine    age_drop      dm_type_ex~s
2021-07-14T09:52:04.782885100Z bp_dias_da~e  cancer_non~m  diabetes_t~e  imd_drop      hba1ccat
2021-07-14T09:52:04.783036400Z bp_dias_da~d  esrf_date     diabetes_e~s  bmi_time      hba1c75
2021-07-14T09:52:04.783310800Z crea~te_date  esrf          diabetes_e~r  bmi_age       tpp_infec_~e
2021-07-14T09:52:04.783529600Z crea~ne_date  dialysis_d~e  hba1c_mmol~l  SCr_adj
2021-07-14T09:52:04.783657100Z smoki~e_date  dialysis      hba1c_per~ge  min
2021-07-14T09:52:04.783666600Z 
2021-07-14T09:52:04.783681500Z . drop `r(varlist)'
2021-07-14T09:52:04.786271500Z 
2021-07-14T09:52:04.786300400Z . 
2021-07-14T09:52:04.786306300Z . 
2021-07-14T09:52:04.786309700Z . /* APPLY INCLUSION/EXCLUIONS=================================================
2021-07-14T09:52:04.786313200Z > =*/
2021-07-14T09:52:04.786316700Z . noi di "DROP AGE >110:"
2021-07-14T09:52:04.786320000Z DROP AGE >110:
2021-07-14T09:52:04.786333400Z 
2021-07-14T09:52:04.786340700Z . drop if age > 110 & age != .
2021-07-14T09:52:04.788786700Z (0 observations deleted)
2021-07-14T09:52:04.788806900Z 
2021-07-14T09:52:04.788810100Z . 
2021-07-14T09:52:04.788812700Z . noi di "DROP IF DIED BEFORE INDEX"
2021-07-14T09:52:04.788815400Z DROP IF DIED BEFORE INDEX
2021-07-14T09:52:04.788818000Z 
2021-07-14T09:52:04.788820600Z . drop if died_date_ons <= date("$indexdate", "DMY")
2021-07-14T09:52:04.803569400Z (2,878 observations deleted)
2021-07-14T09:52:04.803602000Z 
2021-07-14T09:52:04.803606300Z . 
2021-07-14T09:52:04.803609300Z . noi di "DROP IF DIED BEFORE INDEX"
2021-07-14T09:52:04.803612500Z DROP IF DIED BEFORE INDEX
2021-07-14T09:52:04.803615200Z 
2021-07-14T09:52:04.803618000Z . drop if died_date_ons <= date("$indexdate", "DMY")
2021-07-14T09:52:04.811802600Z (0 observations deleted)
2021-07-14T09:52:04.811818900Z 
2021-07-14T09:52:04.811823100Z . 
2021-07-14T09:52:04.811826400Z . noi di "DROP NO ETHNICITY DATA"
2021-07-14T09:52:04.811830100Z DROP NO ETHNICITY DATA
2021-07-14T09:52:04.811833300Z 
2021-07-14T09:52:04.811905400Z . keep if ethnicity!=.u
2021-07-14T09:52:04.815334800Z (3,053 observations deleted)
2021-07-14T09:52:04.815356200Z 
2021-07-14T09:52:04.815360300Z . 
2021-07-14T09:52:04.815362200Z . ***************
2021-07-14T09:52:04.815364100Z . *  Save data  *
2021-07-14T09:52:04.815365900Z . ***************
2021-07-14T09:52:04.815367800Z . sort patient_id
2021-07-14T09:52:04.821266800Z 
2021-07-14T09:52:04.821280700Z . save $tempdir/analysis_dataset_worms, replace
2021-07-14T09:52:04.823024800Z (note: file tempdata/analysis_dataset_worms.dta not found)
2021-07-14T09:52:04.823038200Z file tempdata/analysis_dataset_worms.dta saved
2021-07-14T09:52:04.823054600Z 
2021-07-14T09:52:04.823056600Z . 
2021-07-14T09:52:04.823058500Z . 
2021-07-14T09:52:04.823060200Z . 
2021-07-14T09:52:04.823062100Z . use  $tempdir/analysis_dataset_worms, clear
2021-07-14T09:52:04.823895200Z 
2021-07-14T09:52:04.823904900Z . keep if age66==0
2021-07-14T09:52:04.825706600Z (1,900 observations deleted)
2021-07-14T09:52:04.825719400Z 
2021-07-14T09:52:04.825722000Z . * Create restricted cubic splines for age
2021-07-14T09:52:04.825724100Z . mkspline age = age, cubic nknots(4)
2021-07-14T09:52:04.849938300Z 
2021-07-14T09:52:04.849956200Z . save $tempdir/analysis_dataset_worms_ageband_0, replace
2021-07-14T09:52:04.851436400Z (note: file tempdata/analysis_dataset_worms_ageband_0.dta not found)
2021-07-14T09:52:04.851450000Z file tempdata/analysis_dataset_worms_ageband_0.dta saved
2021-07-14T09:52:04.851452700Z 
2021-07-14T09:52:04.851454600Z . 
2021-07-14T09:52:04.851456400Z . 
2021-07-14T09:52:04.851458200Z . use  $tempdir/analysis_dataset_worms, clear
2021-07-14T09:52:04.852561900Z 
2021-07-14T09:52:04.852571200Z . keep if age66==1
2021-07-14T09:52:04.854046100Z (7,436 observations deleted)
2021-07-14T09:52:04.854057700Z 
2021-07-14T09:52:04.854061100Z . * Create restricted cubic splines for age
2021-07-14T09:52:04.854063900Z . mkspline age = age, cubic nknots(4)
2021-07-14T09:52:04.862193500Z 
2021-07-14T09:52:04.862219100Z . save $tempdir/analysis_dataset_worms_ageband_1, replace
2021-07-14T09:52:04.862823000Z (note: file tempdata/analysis_dataset_worms_ageband_1.dta not found)
2021-07-14T09:52:04.862835400Z file tempdata/analysis_dataset_worms_ageband_1.dta saved
2021-07-14T09:52:04.862840300Z 
2021-07-14T09:52:04.862866300Z . 
2021-07-14T09:52:04.862872900Z . 
2021-07-14T09:52:04.862875800Z . *STSET data
2021-07-14T09:52:04.862877700Z . forvalues x=0/1 {
2021-07-14T09:52:04.862885600Z   2. use $tempdir/analysis_dataset_worms_ageband_`x', clear
2021-07-14T09:52:04.862887600Z   3. * Save a version set on NON ONS covid death outcome
2021-07-14T09:52:04.862889600Z . stset stime_worms, fail(worms)                          ///
2021-07-14T09:52:04.862891500Z >         id(patient_id) enter(enter_date) origin(enter_date)
2021-07-14T09:52:04.862893800Z   4. save "$tempdir/cr_create_analysis_dataset_STSET_worms_ageband_`x'.dta", re
2021-07-14T09:52:04.862896000Z > place
2021-07-14T09:52:04.862898000Z   5. 
2021-07-14T09:52:04.862900500Z . }
2021-07-14T09:52:05.009196300Z 
2021-07-14T09:52:05.009235500Z                 id:  patient_id
2021-07-14T09:52:05.009240400Z      failure event:  worms != 0 & worms < .
2021-07-14T09:52:05.009244200Z obs. time interval:  (stime_worms[_n-1], stime_worms]
2021-07-14T09:52:05.009246200Z  enter on or after:  time enter_date
2021-07-14T09:52:05.009248300Z  exit on or before:  failure
2021-07-14T09:52:05.009250200Z     t for analysis:  (time-origin)
2021-07-14T09:52:05.009370700Z             origin:  time enter_date
2021-07-14T09:52:05.009380100Z 
2021-07-14T09:52:05.009383900Z ------------------------------------------------------------------------------
2021-07-14T09:52:05.009388100Z       7,436  total observations
2021-07-14T09:52:05.009771200Z           0  exclusions
2021-07-14T09:52:05.009784800Z ------------------------------------------------------------------------------
2021-07-14T09:52:05.009788800Z       7,436  observations remaining, representing
2021-07-14T09:52:05.023945100Z       7,436  subjects
2021-07-14T09:52:05.038441100Z         572  failures in single-failure-per-subject data
2021-07-14T09:52:05.063240500Z   2,607,173  total analysis time at risk and under observation
2021-07-14T09:52:05.063270900Z                                                 at risk from t =         0
2021-07-14T09:52:05.063720100Z                                      earliest observed entry t =         0
2021-07-14T09:52:05.064126200Z                                           last observed exit t =       365
2021-07-14T09:52:05.097678300Z (note: file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_0.dta not f
2021-07-14T09:52:05.097695500Z > ound)
2021-07-14T09:52:05.097700000Z file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_0.dta saved
2021-07-14T09:52:05.097703400Z 
2021-07-14T09:52:05.097706400Z                 id:  patient_id
2021-07-14T09:52:05.097709400Z      failure event:  worms != 0 & worms < .
2021-07-14T09:52:05.097712500Z obs. time interval:  (stime_worms[_n-1], stime_worms]
2021-07-14T09:52:05.097715600Z  enter on or after:  time enter_date
2021-07-14T09:52:05.097728400Z  exit on or before:  failure
2021-07-14T09:52:05.097732300Z     t for analysis:  (time-origin)
2021-07-14T09:52:05.097736200Z             origin:  time enter_date
2021-07-14T09:52:05.097797900Z 
2021-07-14T09:52:05.097808000Z ------------------------------------------------------------------------------
2021-07-14T09:52:05.097847000Z       1,900  total observations
2021-07-14T09:52:05.098045400Z           0  exclusions
2021-07-14T09:52:05.098055000Z ------------------------------------------------------------------------------
2021-07-14T09:52:05.098059000Z       1,900  observations remaining, representing
2021-07-14T09:52:05.101561700Z       1,900  subjects
2021-07-14T09:52:05.105104300Z         143  failures in single-failure-per-subject data
2021-07-14T09:52:05.112876700Z     666,741  total analysis time at risk and under observation
2021-07-14T09:52:05.112897400Z                                                 at risk from t =         0
2021-07-14T09:52:05.112901900Z                                      earliest observed entry t =         0
2021-07-14T09:52:05.113040100Z                                           last observed exit t =       365
2021-07-14T09:52:05.114067000Z (note: file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_1.dta not f
2021-07-14T09:52:05.114079900Z > ound)
2021-07-14T09:52:05.114084300Z file tempdata/cr_create_analysis_dataset_STSET_worms_ageband_1.dta saved
2021-07-14T09:52:05.114087600Z 
2021-07-14T09:52:05.114090100Z . 
2021-07-14T09:52:05.114092600Z . 
2021-07-14T09:52:05.114095700Z . * Close log file
2021-07-14T09:52:05.114098400Z . log close
2021-07-14T09:52:05.114178500Z       name:  <unnamed>
2021-07-14T09:52:05.114186600Z        log:  /workspace/log/WORMS_01_cr_analysis_dataset.log
2021-07-14T09:52:05.114190200Z   log type:  text
2021-07-14T09:52:05.114193200Z  closed on:  14 Jul 2021, 09:52:05
2021-07-14T09:52:05.114196200Z -------------------------------------------------------------------------------
2021-07-14T09:52:05.114199300Z 
2021-07-14T09:52:05.114202400Z . 
2021-07-14T09:52:05.114205500Z . 
2021-07-14T09:52:05.114208600Z end of do-file
2021-07-14T09:52:05.114211800Z 
2021-07-14T09:52:05.114214600Z . . file open output using "/tmp/tmp.qT2db8Mnfs", write text replace
2021-07-14T09:52:05.114524100Z 
2021-07-14T09:52:05.114535000Z . . file write output "success" 
2021-07-14T09:52:05.114539500Z 
2021-07-14T09:52:05.114542600Z . . file close output
2021-07-14T09:52:05.114546000Z 
2021-07-14T09:52:05.114549400Z . 
2021-07-14T09:52:05.114552500Z end of do-file
2021-07-14T09:52:05.114562400Z 
2021-07-14T09:52:05.114565600Z 
2021-07-14T09:52:05.141691400Z . 

state: succeeded
commit: none
docker_image_id: sha256:2cfae55f0ae53b85c43f26639279eb9d1deb03aff879163255761854461f4ca9
exit_code: 0
job_id: wt3vz37zwfz565u6
run_by_user: qc18278
created_at: 2021-07-14T09:51:47Z
started_at: 2021-07-14T09:52:01Z
completed_at: 2021-07-14T09:52:10Z

Completed successfully

outputs:
  log/WORMS_01_cr_analysis_dataset.log                           - moderately_sensitive
  tempdata/analysis_dataset_worms.dta                            - highly_sensitive    
  tempdata/analysis_dataset_worms_ageband_0.dta                  - highly_sensitive    
  tempdata/analysis_dataset_worms_ageband_1.dta                  - highly_sensitive    
  tempdata/cr_create_analysis_dataset_STSET_worms_ageband_0.dta  - highly_sensitive    
  tempdata/cr_create_analysis_dataset_STSET_worms_ageband_1.dta  - highly_sensitive    